<Window x:Class="VPetLLM.UI.Windows.winSettingNew"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VPetLLM"
    
        mc:Ignorable="d"
        Title="VPetLLM"
    xmlns:utils="clr-namespace:VPetLLM.Utils"
        Height="907"
        Width="1117"
        Background="{DynamicResource BackgroundBrush}">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Styles/Controls.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <utils:BoolInverter x:Key="BoolInverter"/>

            <!-- çŽ°ä»£åŒ–TabControlæ ·å¼ -->
            <Style x:Key="ModernTabControl" TargetType="TabControl">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="0"/>
            </Style>

            <Style x:Key="ModernTabItem" TargetType="TabItem">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontWeight" Value="Normal"/>
                <Setter Property="Padding" Value="16,12"/>
                <Setter Property="Margin" Value="0,0,2,0"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TabItem">
                            <Border Background="{TemplateBinding Background}"
                                    BorderThickness="0,0,0,2"
                                    BorderBrush="Transparent"
                                    CornerRadius="4,4,0,0">
                                <ContentPresenter x:Name="ContentSite"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Center"
                                                ContentSource="Header"
                                                Margin="{TemplateBinding Padding}"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#FFFFFF"/>
                                    <Setter Property="Foreground" Value="#0078D4"/>
                                    <Setter TargetName="ContentSite" Property="TextElement.FontWeight" Value="SemiBold"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#F3F2F1"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- è®¾ç½®ç»„æ ·å¼ -->
            <Style x:Key="SettingGroup" TargetType="StackPanel">
                <Setter Property="Margin" Value="0,0,0,20"/>
            </Style>

            <Style x:Key="SettingLabel" TargetType="Label">
                <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontWeight" Value="Medium"/>
                <Setter Property="Margin" Value="0,0,0,8"/>
            </Style>

            <!-- èŠ‚æ ‡é¢˜æ ·å¼ -->
            <Style x:Key="SectionHeader" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Margin" Value="0,0,0,12"/>
            </Style>

            <!-- æè¿°æ–‡æœ¬æ ·å¼ -->
            <Style x:Key="DescriptionText" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="TextWrapping" Value="Wrap"/>
                <Setter Property="LineHeight" Value="18"/>
            </Style>

            <!-- çŽ°ä»£åŒ–å¯†ç æ¡†æ ·å¼ -->
            <Style x:Key="ModernPasswordBox" TargetType="PasswordBox">
                <Setter Property="Background" Value="{StaticResource ControlBackgroundBrush}"/>
                <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Padding" Value="12,8"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Height" Value="36"/>
            </Style>

            <!-- DataGridåˆ—å¤´æ ·å¼ -->
            <Style x:Key="ModernDataGridColumnHeader" TargetType="DataGridColumnHeader">
                <Setter Property="Background" Value="{StaticResource ControlBackgroundBrush}"/>
                <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="Padding" Value="12,8"/>
                <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
                <Setter Property="BorderThickness" Value="0,0,1,1"/>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TabControl Grid.Row="0" Style="{StaticResource ModernTabControl}">
            <TabItem Header="{utils:Localize KeyPath=LLM_Settings.Tab}"
                    x:Name="Tab_LLM"
                    Style="{StaticResource ModernTabItem}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <ScrollViewer Grid.Column="0"
                            VerticalScrollBarVisibility="Auto">
                        <Border Style="{StaticResource CardContainer}" Margin="0,0,10,0">
                            <StackPanel Style="{StaticResource SettingGroup}">
                                <Label Content="{utils:Localize KeyPath=LLM_Settings.Provider}"
                                        x:Name="Label_Provider"
                                        Style="{StaticResource SettingLabel}"/>
                                <ComboBox x:Name="ComboBox_Provider"
                                        Margin="0,0,0,16"
                                        SelectionChanged="ComboBox_Provider_SelectionChanged"
                                        Style="{StaticResource ModernComboBox}">
                                    <!-- ç®€åŒ–çš„ComboBoxItemæ ·å¼ -->
                                    <ComboBox.ItemContainerStyle>
                                        <Style TargetType="ComboBoxItem" BasedOn="{StaticResource {x:Type ComboBoxItem}}">
                                            <Setter Property="Padding" Value="12,8"/>
                                            <Setter Property="FontSize" Value="14"/>
                                            <Setter Property="ContentTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal">
                                                            <!-- æä¾›å•†å›¾æ ‡ -->
                                                            <Border x:Name="ItemIcon"
                                                                    Background="{StaticResource AccentBrush}"
                                                                    CornerRadius="3"
                                                                    Width="18"
                                                                    Height="18"
                                                                    Margin="0,0,8,0">
                                                                <TextBlock x:Name="ItemIconText"
                                                                        Text="âš¡"
                                                                        FontSize="9"
                                                                        Foreground="White"
                                                                        HorizontalAlignment="Center"
                                                                        VerticalAlignment="Center"/>
                                                            </Border>

                                                            <!-- æä¾›å•†åç§° -->
                                                            <TextBlock Text="{Binding}"
                                                                    VerticalAlignment="Center"/>
                                                        </StackPanel>
                                                        <DataTemplate.Triggers>
                                                            <!-- æ ¹æ®ä¸åŒæä¾›å•†è®¾ç½®å›¾æ ‡ -->
                                                            <DataTrigger Binding="{Binding}" Value="Ollama">
                                                                <Setter TargetName="ItemIconText" Property="Text" Value="O"/>
                                                                <Setter TargetName="ItemIcon" Property="Background" Value="#FF6B35"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding}" Value="OpenAI">
                                                                <Setter TargetName="ItemIconText" Property="Text" Value="AI"/>
                                                                <Setter TargetName="ItemIcon" Property="Background" Value="#10A37F"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding}" Value="Gemini">
                                                                <Setter TargetName="ItemIconText" Property="Text" Value="G"/>
                                                                <Setter TargetName="ItemIcon" Property="Background" Value="#4285F4"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding}" Value="Free">
                                                                <Setter TargetName="ItemIconText" Property="Text" Value="F"/>
                                                                <Setter TargetName="ItemIcon" Property="Background" Value="#28A745"/>
                                                            </DataTrigger>
                                                        </DataTemplate.Triggers>
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ComboBox.ItemContainerStyle>
                                </ComboBox>

                                <Label Content="{utils:Localize KeyPath=LLM_Settings.AiName}"
                                        VerticalAlignment="Top"
                                        Margin="0,0,0,0"
                                        x:Name="Label_AiName"
                                        Style="{StaticResource SettingLabel}"/>
                                <TextBox x:Name="TextBox_AiName"
                                         MaxWidth="300"
                                         Margin="0,0,0,16"
                                         Style="{StaticResource ModernTextBox}"
                                         IsEnabled="{Binding IsChecked, ElementName=CheckBox_FollowVPetName, Converter={StaticResource BoolInverter}}"/>
                                <Label Content="{utils:Localize KeyPath=LLM_Settings.UserName}"
                                         VerticalAlignment="Top"
                                         Margin="0,0,0,0"
                                         x:Name="Label_UserName"
                                         Style="{StaticResource SettingLabel}"/>
                                <TextBox x:Name="TextBox_UserName"
                                         MaxWidth="300"
                                         Margin="0,0,0,16"
                                         Style="{StaticResource ModernTextBox}"
                                         IsEnabled="{Binding IsChecked, ElementName=CheckBox_FollowVPetName, Converter={StaticResource BoolInverter}}"/>
                                <CheckBox x:Name="CheckBox_FollowVPetName"
                                        Content="{utils:Localize KeyPath=LLM_Settings.FollowVPetName}"
                                        Margin="0,0,0,16"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <Label Content="{utils:Localize KeyPath=LLM_Settings.Role}"
                                        VerticalAlignment="Top"
                                        Margin="0,0,0,0"
                                        x:Name="Label_Role"
                                        Style="{StaticResource SettingLabel}"/>
                                <TextBox x:Name="TextBox_Role"
                                        TextWrapping="Wrap"
                                        AcceptsReturn="True"
                                        VerticalScrollBarVisibility="Auto"
                                        HorizontalScrollBarVisibility="Auto"
                                        Height="120"
                                        Width="300"
                                        Margin="0,0,0,16"
                                        Style="{StaticResource ModernTextBox}"/>

                                <Label Content="{utils:Localize KeyPath=LLM_Settings.ContextControl}"
                                        Margin="0,0,0,0"
                                        x:Name="Label_ContextControl"
                                        Style="{StaticResource SettingLabel}"/>
                                <CheckBox x:Name="CheckBox_KeepContext"
                                        Content="{utils:Localize KeyPath=LLM_Settings.KeepContext}"
                                        Margin="0,0,0,8"
                                        IsChecked="True"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_EnableChatHistory"
                                        Content="{utils:Localize KeyPath=LLM_Settings.EnableChatHistory}"
                                        Margin="0,0,0,8"
                                        IsChecked="True"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_SeparateChatByProvider"
                                        Content="{utils:Localize KeyPath=LLM_Settings.SeparateChatByProvider}"
                                        Margin="0,0,0,8"
                                        IsChecked="True"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_EnableRecords"
                                        Content="{utils:Localize KeyPath=LLM_Settings.EnableRecords}"
                                        Margin="0,0,0,16"
                                        IsChecked="True"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <WrapPanel HorizontalAlignment="Right"
                                        Margin="0,0,0,16">
                                    <Button x:Name="Button_ClearContext"
                                            Content="{utils:Localize KeyPath=LLM_Settings.ClearContext}"
                                            Click="Button_ClearContext_Click"
                                            Margin="0,0,10,0"
                                            Style="{StaticResource SecondaryButton}"/>
                                    <Button x:Name="Button_EditContext"
                                            Content="{utils:Localize KeyPath=LLM_Settings.EditContext}"
                                            Click="Button_EditContext_Click"
                                            Style="{StaticResource ModernButton}"/>
                                </WrapPanel>
                                <WrapPanel HorizontalAlignment="Right"
                                        Margin="0,0,0,0">
                                    <Button x:Name="Button_ClearRecords"
                                            Content="{utils:Localize KeyPath=LLM_Settings.ClearRecords}"
                                            Click="Button_ClearRecords_Click"
                                            Margin="0,0,10,0"
                                            Style="{StaticResource SecondaryButton}"/>
                                    <Button x:Name="Button_EditRecords"
                                            Content="{utils:Localize KeyPath=LLM_Settings.EditRecords}"
                                            Click="Button_EditRecords_Click"
                                            Style="{StaticResource ModernButton}"/>
                                </WrapPanel>
                            </StackPanel>
                        </Border>
                    </ScrollViewer>

                    <TabControl Grid.Column="1">
                        <TabItem Header="{utils:Localize KeyPath=Ollama.Header}"
                                x:Name="Tab_Ollama"
                                Style="{StaticResource ModernTabItem}">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Border Style="{StaticResource CardContainer}">
                                    <StackPanel Style="{StaticResource SettingGroup}">
                                        <Label Content="{utils:Localize KeyPath=Ollama.URL}"
                                                x:Name="Label_OllamaUrl"
                                                Style="{StaticResource SettingLabel}"/>
                                        <TextBox x:Name="TextBox_OllamaUrl"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernTextBox}"/>
                                        <Label Content="{utils:Localize KeyPath=Ollama.Model}"
                                                x:Name="Label_OllamaModel"
                                                Style="{StaticResource SettingLabel}"/>
                                        <Grid Margin="0,0,0,16">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <ComboBox x:Name="ComboBox_OllamaModel"
                                                    Grid.Column="0"
                                                    IsEditable="True"
                                                    Style="{StaticResource ModelComboBox}"/>
                                            <Button x:Name="Button_RefreshOllamaModels"
                                                    Grid.Column="1"
                                                    Content="{utils:Localize KeyPath=Ollama.Refresh}"
                                                    Click="Button_RefreshOllamaModels_Click"
                                                    Margin="10,0,0,0"
                                                    Style="{StaticResource SecondaryButton}"/>
                                        </Grid>
                                        <CheckBox x:Name="CheckBox_Ollama_EnableStreaming"
                                                Content="{utils:Localize KeyPath=Ollama.EnableStreaming}"
                                                Margin="0,0,0,8"
                                                Style="{StaticResource ModernCheckBox}"/>
                                        <CheckBox x:Name="CheckBox_Ollama_EnableVision"
                                                Content="{utils:Localize KeyPath=Ollama.EnableVision, Default=å¯ç”¨è§†è§‰èƒ½åŠ›}"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernCheckBox}">
                                            <CheckBox.ToolTip>
                                                <ToolTip>
                                                    <TextBlock Text="{utils:Localize KeyPath=Ollama.EnableVisionTooltip, Default=å¯ç”¨åŽå¯ä»¥å‘é€å›¾åƒç»™æ­¤æ¨¡åž‹è¿›è¡Œå¤šæ¨¡æ€åˆ†æžï¼ˆéœ€è¦ä½¿ç”¨æ”¯æŒè§†è§‰çš„æ¨¡åž‹å¦‚ llavaï¼‰}"/>
                                                </ToolTip>
                                            </CheckBox.ToolTip>
                                        </CheckBox>
                                        <CheckBox x:Name="CheckBox_Ollama_EnableAdvanced"
                                                Content="{utils:Localize KeyPath=Ollama.EnableAdvanced}"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernCheckBox}"/>
                                        <StackPanel x:Name="StackPanel_Ollama_Advanced"
                                                Margin="20,0,0,0"
                                                IsEnabled="{Binding ElementName=CheckBox_Ollama_EnableAdvanced, Path=IsChecked}">
                                            <StackPanel Orientation="Horizontal"
                                                    Margin="0,0,0,12">
                                                <TextBlock Text="{utils:Localize KeyPath=Ollama.Temperature, Suffix=:}"
                                                        Width="80"
                                                        VerticalAlignment="Center"
                                                        x:Name="TextBlock_Ollama_Temperature"
                                                        Foreground="{StaticResource PrimaryTextBrush}"
                                                        FontSize="14"/>
                                                <Slider x:Name="Slider_Ollama_Temperature"
                                                        Minimum="0"
                                                        Maximum="2"
                                                        Width="125"
                                                        Margin="10,0"
                                                        VerticalAlignment="Center"/>
                                                <TextBlock x:Name="TextBlock_Ollama_TemperatureValue"
                                                        Width="40"
                                                        VerticalAlignment="Center"
                                                        Foreground="{StaticResource SecondaryTextBrush}"
                                                        FontSize="14"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal"
                                                    Margin="0,0,0,0">
                                                <TextBlock Text="{utils:Localize KeyPath=Ollama.MaxTokens, Suffix=:}"
                                                        Width="80"
                                                        VerticalAlignment="Center"
                                                        x:Name="TextBlock_Ollama_MaxTokens"
                                                        Foreground="{StaticResource PrimaryTextBrush}"
                                                        FontSize="14"/>
                                                <TextBox x:Name="TextBox_Ollama_MaxTokens"
                                                        Width="125"
                                                        Margin="10,0"
                                                        VerticalAlignment="Center"
                                                        Style="{StaticResource ModernTextBox}"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </ScrollViewer>
                        </TabItem>
                        <TabItem Header="{utils:Localize KeyPath=OpenAI.Header}"
                                x:Name="Tab_OpenAI"
                                Style="{StaticResource ModernTabItem}">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Border Style="{StaticResource CardContainer}">
                                    <StackPanel Style="{StaticResource SettingGroup}">
                                        <Label Content="{utils:Localize KeyPath=OpenAI.ChannelManagement}"
                                                x:Name="Label_OpenAINodeManagement"
                                                Style="{StaticResource SettingLabel}"
                                                FontSize="16"
                                                FontWeight="Bold"/>
                                        <TextBlock Text="{utils:Localize KeyPath=OpenAI.ChannelManagementDesc}"
                                                TextWrapping="Wrap"
                                                Foreground="{StaticResource SecondaryTextBrush}"
                                                Margin="0,0,0,16"
                                                FontSize="12"/>

                                        <CheckBox x:Name="CheckBox_OpenAI_EnableLoadBalancing"
                                                Content="{utils:Localize KeyPath=OpenAI.EnableLoadBalancing}"
                                                Margin="0,0,0,16"
                                                IsChecked="True"
                                                Style="{StaticResource ModernCheckBox}"/>

                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                            <Button x:Name="Button_AddOpenAINode"
                                                    Content="{utils:Localize KeyPath=OpenAI.AddChannel}"
                                                    Click="Button_AddOpenAINode_Click"
                                                    Style="{StaticResource ModernButton}"/>
                                            <Button x:Name="Button_RemoveOpenAINode"
                                                    Content="{utils:Localize KeyPath=OpenAI.RemoveSelectedChannel}"
                                                    Click="Button_RemoveOpenAINode_Click"
                                                    Margin="10,0,0,0"
                                                    Style="{StaticResource SecondaryButton}"/>
                                        </StackPanel>

                                        <ListView x:Name="ListView_OpenAINodes"
                                                  Height="200"
                                                  Margin="0,0,0,16"
                                                  SelectionMode="Single"
                                                  SelectionChanged="ListView_OpenAINodes_SelectionChanged">
                                            <ListView.View>
                                                <GridView>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=OpenAI.Enabled}" Width="50">
                                                        <GridViewColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <CheckBox IsChecked="{Binding Enabled}" 
                                                                          HorizontalAlignment="Center"
                                                                          VerticalAlignment="Center"/>
                                                            </DataTemplate>
                                                        </GridViewColumn.CellTemplate>
                                                    </GridViewColumn>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=OpenAI.ChannelName}" Width="120" DisplayMemberBinding="{Binding Name}"/>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=OpenAI.ApiKey}" Width="200">
                                                        <GridViewColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <PasswordBox utils:PasswordBoxHelper.BoundPassword="{Binding ApiKey, Mode=TwoWay}"
                                                                            PasswordChar="*"
                                                                            BorderThickness="0"
                                                                            Background="Transparent"
                                                                            IsEnabled="False"/>
                                                            </DataTemplate>
                                                        </GridViewColumn.CellTemplate>
                                                    </GridViewColumn>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=OpenAI.Model}" Width="120" DisplayMemberBinding="{Binding Model}"/>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=OpenAI.ApiAddress}" Width="150" DisplayMemberBinding="{Binding Url}"/>
                                                </GridView>
                                            </ListView.View>
                                        </ListView>

                                        <StackPanel x:Name="StackPanel_OpenAINodeDetails"
                                                Margin="20,0,0,16"
                                                IsEnabled="{Binding ElementName=ListView_OpenAINodes, Path=SelectedItem}">
                                            <Label Content="{utils:Localize KeyPath=OpenAI.ChannelConfig}"
                                                    Style="{StaticResource SettingLabel}"
                                                    FontSize="14"/>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <Label Content="{utils:Localize KeyPath=OpenAI.ChannelName, Suffix=:}"
                                                        Grid.Row="0" Grid.Column="0"
                                                        Style="{StaticResource SettingLabel}"/>
                                                <TextBox x:Name="TextBox_OpenAINodeName"
                                                        Grid.Row="0" Grid.Column="1"
                                                        Margin="10,0,0,8"
                                                        Style="{StaticResource ModernTextBox}"/>

                                                <Label Content="{utils:Localize KeyPath=OpenAI.ApiKey, Suffix=:}"
                                                        Grid.Row="1" Grid.Column="0"
                                                        Style="{StaticResource SettingLabel}"/>
                                                <Grid Grid.Row="1" Grid.Column="1" Margin="10,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <PasswordBox x:Name="PasswordBox_OpenAIApiKey"
                                                                 Grid.Column="0"
                                                                 PasswordChar="*"/>
                                                    <TextBox x:Name="TextBox_OpenAIApiKey_Plain"
                                                             Grid.Column="0"
                                                             Visibility="Collapsed"
                                                             AcceptsReturn="True"
                                                             TextWrapping="Wrap"
                                                             VerticalScrollBarVisibility="Auto"
                                                             Height="80"
                                                             ToolTip="{utils:Localize KeyPath=OpenAI.ApiKeyTooltip}"
                                                             FontFamily="Consolas"
                                                             Style="{StaticResource ModernTextBox}"/>
                                                    <Button x:Name="Button_Toggle_OpenAIApiKey"
                                                            Grid.Column="1"
                                                            Content="ðŸ‘"
                                                            ToolTip="{utils:Localize KeyPath=OpenAI.ToggleApiKeyVisibility}"
                                                            Click="Button_Toggle_OpenAIApiKey_Click"
                                                            Margin="8,0,0,0"
                                                            Style="{StaticResource SecondaryButton}"/>
                                                </Grid>

                                                <Label Content="{utils:Localize KeyPath=OpenAI.Model, Suffix=:}"
                                                        Grid.Row="2" Grid.Column="0"
                                                        Style="{StaticResource SettingLabel}"/>
                                                <Grid Grid.Row="2" Grid.Column="1" Margin="10,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <ComboBox x:Name="ComboBox_OpenAIModel"
                                                            Grid.Column="0"
                                                            IsEditable="True"
                                                            Style="{StaticResource ModelComboBox}"/>
                                                    <Button x:Name="Button_RefreshOpenAIModels"
                                                            Grid.Column="1"
                                                            Content="{utils:Localize KeyPath=OpenAI.Refresh}"
                                                            Click="Button_RefreshOpenAIModels_Click"
                                                            Margin="10,0,0,0"
                                                            Style="{StaticResource SecondaryButton}"/>
                                                </Grid>

                                                <Label Content="{utils:Localize KeyPath=OpenAI.ApiAddress, Suffix=:}"
                                                        Grid.Row="3" Grid.Column="0"
                                                        Style="{StaticResource SettingLabel}"/>
                                                <TextBox x:Name="TextBox_OpenAIUrl"
                                                        Grid.Row="3" Grid.Column="1"
                                                        Margin="10,0,0,8"
                                                        Style="{StaticResource ModernTextBox}"/>
                                            </Grid>

                                            <CheckBox x:Name="CheckBox_OpenAI_EnableStreaming"
                                                    Content="{utils:Localize KeyPath=OpenAI.EnableStreaming}"
                                                    Margin="0,16,0,8"
                                                    Style="{StaticResource ModernCheckBox}"/>
                                            <CheckBox x:Name="CheckBox_OpenAI_EnableVision"
                                                    Content="{utils:Localize KeyPath=OpenAI.EnableVision, Default=å¯ç”¨è§†è§‰èƒ½åŠ›}"
                                                    Margin="0,0,0,16"
                                                    Style="{StaticResource ModernCheckBox}">
                                                <CheckBox.ToolTip>
                                                    <ToolTip>
                                                        <TextBlock Text="{utils:Localize KeyPath=OpenAI.EnableVisionTooltip, Default=å¯ç”¨åŽå¯ä»¥å‘é€å›¾åƒç»™æ­¤èŠ‚ç‚¹è¿›è¡Œå¤šæ¨¡æ€åˆ†æž}"/>
                                                    </ToolTip>
                                                </CheckBox.ToolTip>
                                            </CheckBox>
                                            <CheckBox x:Name="CheckBox_OpenAI_EnableAdvanced"
                                                    Content="{utils:Localize KeyPath=OpenAI.EnableAdvanced}"
                                                    Margin="0,0,0,16"
                                                    Style="{StaticResource ModernCheckBox}"/>
                                            <StackPanel x:Name="StackPanel_OpenAI_Advanced"
                                                    Margin="20,0,0,0"
                                                    IsEnabled="{Binding ElementName=CheckBox_OpenAI_EnableAdvanced, Path=IsChecked}">
                                                <StackPanel Orientation="Horizontal"
                                                        Margin="0,0,0,12">
                                                    <TextBlock Text="{utils:Localize KeyPath=OpenAI.Temperature}"
                                                            Width="80"
                                                            VerticalAlignment="Center"
                                                            x:Name="TextBlock_OpenAI_Temperature"
                                                            Foreground="{StaticResource PrimaryTextBrush}"
                                                            FontSize="14"/>
                                                    <Slider x:Name="Slider_OpenAI_Temperature"
                                                            Minimum="0"
                                                            Maximum="2"
                                                            Width="125"
                                                            Margin="10,0"
                                                            VerticalAlignment="Center"/>
                                                    <TextBlock x:Name="TextBlock_OpenAI_TemperatureValue"
                                                            Width="40"
                                                            VerticalAlignment="Center"
                                                            Foreground="{StaticResource SecondaryTextBrush}"
                                                            FontSize="14"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal"
                                                        Margin="0,0,0,0">
                                                    <TextBlock Text="{utils:Localize KeyPath=OpenAI.MaxTokens}"
                                                            Width="80"
                                                            VerticalAlignment="Center"
                                                            x:Name="TextBlock_OpenAI_MaxTokens"
                                                            Foreground="{StaticResource PrimaryTextBrush}"
                                                            FontSize="14"/>
                                                    <TextBox x:Name="TextBox_OpenAI_MaxTokens"
                                                            Width="125"
                                                            Margin="10,0"
                                                            VerticalAlignment="Center"
                                                            Style="{StaticResource ModernTextBox}"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </ScrollViewer>
                        </TabItem>
                        <TabItem Header="{utils:Localize KeyPath=Gemini.Header}"
                                x:Name="Tab_Gemini"
                                Style="{StaticResource ModernTabItem}">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Border Style="{StaticResource CardContainer}">
                                    <StackPanel Style="{StaticResource SettingGroup}">
                                        <!-- Gemini èŠ‚ç‚¹ç®¡ç†ï¼ˆæ–°å¢žï¼‰ -->
                                        <Label Content="{utils:Localize KeyPath=Gemini.ChannelManagement}"
                                               x:Name="Label_GeminiNodeManagement"
                                               Style="{StaticResource SettingLabel}"
                                               FontSize="16"
                                               FontWeight="Bold"/>
                                        <TextBlock Text="{utils:Localize KeyPath=Gemini.ChannelManagementDesc}"
                                                   TextWrapping="Wrap"
                                                   Foreground="{StaticResource SecondaryTextBrush}"
                                                   Margin="0,0,0,16"
                                                   FontSize="12"/>
                                        <CheckBox x:Name="CheckBox_Gemini_EnableLoadBalancing"
                                                  Content="{utils:Localize KeyPath=Gemini.EnableLoadBalancing}"
                                                  Margin="0,0,0,16"
                                                  IsChecked="True"
                                                  Style="{StaticResource ModernCheckBox}"/>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                            <Button x:Name="Button_AddGeminiNode"
                                                    Content="{utils:Localize KeyPath=Gemini.AddChannel}"
                                                    Click="Button_AddGeminiNode_Click"
                                                    Style="{StaticResource ModernButton}"/>
                                            <Button x:Name="Button_RemoveGeminiNode"
                                                    Content="{utils:Localize KeyPath=Gemini.RemoveSelectedChannel}"
                                                    Click="Button_RemoveGeminiNode_Click"
                                                    Margin="10,0,0,0"
                                                    Style="{StaticResource SecondaryButton}"
                                                    />
                                        </StackPanel>
                                        <ListView x:Name="ListView_GeminiNodes"
                                                  Height="200"
                                                  Margin="0,0,0,16"
                                                  SelectionMode="Single"
                                                  SelectionChanged="ListView_GeminiNodes_SelectionChanged">
                                            <ListView.View>
                                                <GridView>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=Gemini.Enabled}" Width="50">
                                                        <GridViewColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <CheckBox IsChecked="{Binding Enabled}"
                                                                          HorizontalAlignment="Center"
                                                                          VerticalAlignment="Center"/>
                                                            </DataTemplate>
                                                        </GridViewColumn.CellTemplate>
                                                    </GridViewColumn>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=Gemini.ChannelName}" Width="120" DisplayMemberBinding="{Binding Name}"/>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=Gemini.ApiKey}" Width="200">
                                                        <GridViewColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <PasswordBox utils:PasswordBoxHelper.BoundPassword="{Binding ApiKey, Mode=TwoWay}"
                                                                             PasswordChar="*"
                                                                             BorderThickness="0"
                                                                             Background="Transparent"
                                                                             IsEnabled="False"/>
                                                            </DataTemplate>
                                                        </GridViewColumn.CellTemplate>
                                                    </GridViewColumn>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=Gemini.Model}" Width="120" DisplayMemberBinding="{Binding Model}"/>
                                                    <GridViewColumn Header="{utils:Localize KeyPath=Gemini.ApiAddress}" Width="150" DisplayMemberBinding="{Binding Url}"/>
                                                </GridView>
                                            </ListView.View>
                                        </ListView>
                                        <StackPanel x:Name="StackPanel_GeminiNodeDetails"
                                                    Margin="20,0,0,16"
                                                    IsEnabled="{Binding ElementName=ListView_GeminiNodes, Path=SelectedItem}">
                                            <Label Content="{utils:Localize KeyPath=Gemini.ChannelConfig}"
                                                   Style="{StaticResource SettingLabel}"
                                                   FontSize="14"/>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                <Label Content="{utils:Localize KeyPath=Gemini.ChannelName, Suffix=:}"
                                                       Grid.Row="0" Grid.Column="0"
                                                       Style="{StaticResource SettingLabel}"/>
                                                <TextBox x:Name="TextBox_GeminiNodeName"
                                                         Grid.Row="0" Grid.Column="1"
                                                         Margin="10,0,0,8"
                                                         Style="{StaticResource ModernTextBox}"/>
                                                <Label Content="{utils:Localize KeyPath=Gemini.ApiKey, Suffix=:}"
                                                       Grid.Row="1" Grid.Column="0"
                                                       Style="{StaticResource SettingLabel}"/>
                                                <Grid Grid.Row="1" Grid.Column="1" Margin="10,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <PasswordBox x:Name="PasswordBox_GeminiApiKey"
                                                                 Grid.Column="0"
                                                                 PasswordChar="*"/>
                                                    <TextBox x:Name="TextBox_GeminiApiKey_Plain"
                                                             Grid.Column="0"
                                                             Visibility="Collapsed"
                                                             AcceptsReturn="True"
                                                             TextWrapping="Wrap"
                                                             VerticalScrollBarVisibility="Auto"
                                                             Height="80"
                                                             ToolTip="{utils:Localize KeyPath=Gemini.ApiKeyTooltip}"
                                                             FontFamily="Consolas"
                                                             Style="{StaticResource ModernTextBox}"/>
                                                    <Button x:Name="Button_Toggle_GeminiApiKey"
                                                            Grid.Column="1"
                                                            Content="ðŸ‘"
                                                            ToolTip="{utils:Localize KeyPath=Gemini.ToggleApiKeyVisibility}"
                                                            Click="Button_Toggle_GeminiApiKey_Click"
                                                            Margin="8,0,0,0"
                                                            Style="{StaticResource SecondaryButton}"/>
                                                </Grid>
                                                <Label Content="{utils:Localize KeyPath=Gemini.Model, Suffix=:}"
                                                       Grid.Row="2" Grid.Column="0"
                                                       Style="{StaticResource SettingLabel}"/>
                                                <Grid Grid.Row="2" Grid.Column="1" Margin="10,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <ComboBox x:Name="ComboBox_GeminiNodeModel"
                                                              Grid.Column="0"
                                                              IsEditable="True"
                                                              Style="{StaticResource ModelComboBox}"/>
                                                    <Button x:Name="Button_RefreshGeminiModels_Nodes"
                                                            Grid.Column="1"
                                                            Content="{utils:Localize KeyPath=Gemini.Refresh}"
                                                            Click="Button_RefreshGeminiModels_Click"
                                                            Margin="10,0,0,0"
                                                            Style="{StaticResource SecondaryButton}"/>
                                                </Grid>
                                                <Label Content="{utils:Localize KeyPath=Gemini.ApiAddress, Suffix=:}"
                                                       Grid.Row="3" Grid.Column="0"
                                                       Style="{StaticResource SettingLabel}"/>
                                                <TextBox x:Name="TextBox_GeminiNodeUrl"
                                                         Grid.Row="3" Grid.Column="1"
                                                         Margin="10,0,0,8"
                                                         Style="{StaticResource ModernTextBox}"/>
                                            </Grid>
                                            <CheckBox x:Name="CheckBox_GeminiNode_EnableStreaming"
                                                      Content="{utils:Localize KeyPath=Gemini.EnableStreaming}"
                                                      Margin="0,16,0,8"
                                                      Style="{StaticResource ModernCheckBox}"/>
                                            <CheckBox x:Name="CheckBox_GeminiNode_EnableVision"
                                                      Content="{utils:Localize KeyPath=Gemini.EnableVision, Default=å¯ç”¨è§†è§‰èƒ½åŠ›}"
                                                      Margin="0,0,0,16"
                                                      Style="{StaticResource ModernCheckBox}">
                                                <CheckBox.ToolTip>
                                                    <ToolTip>
                                                        <TextBlock Text="{utils:Localize KeyPath=Gemini.EnableVisionTooltip, Default=å¯ç”¨åŽå¯ä»¥å‘é€å›¾åƒç»™æ­¤èŠ‚ç‚¹è¿›è¡Œå¤šæ¨¡æ€åˆ†æž}"/>
                                                    </ToolTip>
                                                </CheckBox.ToolTip>
                                            </CheckBox>
                                            <CheckBox x:Name="CheckBox_GeminiNode_EnableAdvanced"
                                                      Content="{utils:Localize KeyPath=Gemini.EnableAdvanced}"
                                                      Margin="0,0,0,16"
                                                      Style="{StaticResource ModernCheckBox}"/>
                                            <StackPanel x:Name="StackPanel_GeminiNode_Advanced"
                                                        Margin="20,0,0,0"
                                                        IsEnabled="{Binding ElementName=CheckBox_GeminiNode_EnableAdvanced, Path=IsChecked}">
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="0,0,0,12">
                                                    <TextBlock Text="{utils:Localize KeyPath=Gemini.Temperature}"
                                                               Width="80"
                                                               VerticalAlignment="Center"
                                                               Foreground="{StaticResource PrimaryTextBrush}"
                                                               FontSize="14"/>
                                                    <Slider x:Name="Slider_GeminiNode_Temperature"
                                                            Minimum="0"
                                                            Maximum="2"
                                                            Width="125"
                                                            Margin="10,0"
                                                            VerticalAlignment="Center"/>
                                                    <TextBlock x:Name="TextBlock_GeminiNode_TemperatureValue"
                                                               Width="40"
                                                               VerticalAlignment="Center"
                                                               Foreground="{StaticResource SecondaryTextBrush}"
                                                               FontSize="14"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="0,0,0,0">
                                                    <TextBlock Text="{utils:Localize KeyPath=Gemini.MaxTokens}"
                                                               Width="80"
                                                               VerticalAlignment="Center"
                                                               Foreground="{StaticResource PrimaryTextBrush}"
                                                               FontSize="14"/>
                                                    <TextBox x:Name="TextBox_GeminiNode_MaxTokens"
                                                             Width="125"
                                                             Margin="10,0"
                                                             VerticalAlignment="Center"
                                                             Style="{StaticResource ModernTextBox}"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </StackPanel>


                                    </StackPanel>
                                </Border>
                            </ScrollViewer>
                        </TabItem>
                        <TabItem Header="{utils:Localize KeyPath=Free.Header}"
                                x:Name="Tab_Free"
                                Style="{StaticResource ModernTabItem}">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Border Style="{StaticResource CardContainer}">
                                    <StackPanel Style="{StaticResource SettingGroup}">

                                        <TextBlock x:Name="TextBlock_Chat_Free_Config"
                                                Text="{utils:Localize KeyPath=Free.FreeSettings, Default=Free Chat é…ç½®}"
                                                Style="{StaticResource SectionHeader}"
                                                Margin="0,0,0,16"/>


                                        <CheckBox x:Name="CheckBox_Free_EnableStreaming"
                                                Content="{utils:Localize KeyPath=Free.EnableStreaming}"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernCheckBox}"/>
                                        <CheckBox x:Name="CheckBox_Free_EnableVision"
                                                Content="{utils:Localize KeyPath=Free.EnableVision}"
                                                ToolTip="{utils:Localize KeyPath=Free.EnableVisionTooltip}"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernCheckBox}"/>
                                        <CheckBox x:Name="CheckBox_Free_EnableAdvanced"
                                                Content="{utils:Localize KeyPath=Free.EnableAdvanced}"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernCheckBox}"/>
                                        <StackPanel x:Name="StackPanel_Free_Advanced"
                                                Margin="20,0,0,0"
                                                IsEnabled="{Binding ElementName=CheckBox_Free_EnableAdvanced, Path=IsChecked}">
                                            <StackPanel Orientation="Horizontal"
                                                    Margin="0,0,0,12">
                                                <TextBlock Text="{utils:Localize KeyPath=Free.Temperature, Suffix=:}"
                                                        Width="80"
                                                        VerticalAlignment="Center"
                                                        x:Name="TextBlock_Free_Temperature"
                                                        Foreground="{StaticResource PrimaryTextBrush}"
                                                        FontSize="14"/>
                                                <Slider x:Name="Slider_Free_Temperature"
                                                        Minimum="0"
                                                        Maximum="2"
                                                        Width="125"
                                                        Margin="10,0"
                                                        VerticalAlignment="Center"/>
                                                <TextBlock x:Name="TextBlock_Free_TemperatureValue"
                                                        Width="40"
                                                        VerticalAlignment="Center"
                                                        Foreground="{StaticResource SecondaryTextBrush}"
                                                        FontSize="14"/>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal"
                                                    Margin="0,0,0,0">
                                                <TextBlock Text="{utils:Localize KeyPath=Free.MaxTokens, Suffix=:}"
                                                        Width="80"
                                                        VerticalAlignment="Center"
                                                        x:Name="TextBlock_Free_MaxTokens"
                                                        Foreground="{StaticResource PrimaryTextBrush}"
                                                        FontSize="14"/>
                                                <TextBox x:Name="TextBox_Free_MaxTokens"
                                                        Width="125"
                                                        Margin="10,0"
                                                        VerticalAlignment="Center"
                                                        Style="{StaticResource ModernTextBox}"/>
                                            </StackPanel>
                                        </StackPanel>
                                        <Separator Margin="0,16,0,16"/>
                                        <TextBlock Text="{utils:Localize KeyPath=Chat.Free.Description, Default=Free Chat ä½¿ç”¨å†…ç½®çš„å…è´¹LLMæœåŠ¡ï¼Œæ— éœ€é…ç½® API Keyã€‚}"
                                                x:Name="TextBlock_Chat_Free_Description"
                                                Style="{StaticResource DescriptionText}"
                                                Margin="0,0,0,16"/>

                                        <TextBlock Text="{utils:Localize KeyPath=Chat.Free.Provider, Default=æ„Ÿè°¢æä¾›è€… QQï¼š790132463}"
                                                x:Name="TextBlock_Chat_Free_Provider"
                                                Style="{StaticResource DescriptionText}"
                                                Margin="0,0,0,16"/>
                                    </StackPanel>
                                </Border>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </Grid>
            </TabItem>
            <TabItem Header="{utils:Localize KeyPath=Proxy.Tab}"
                    x:Name="Tab_Proxy"
                    Style="{StaticResource ModernTabItem}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Border Style="{StaticResource CardContainer}">
                        <StackPanel Style="{StaticResource SettingGroup}">
                            <CheckBox x:Name="CheckBox_Proxy_IsEnabled"
                                    Content="{utils:Localize KeyPath=Proxy.EnableProxy}"
                                    Margin="0,0,0,16"
                                    Style="{StaticResource ModernCheckBox}"/>
                            <StackPanel Margin="20,0,0,0"
                                    IsEnabled="{Binding ElementName=CheckBox_Proxy_IsEnabled, Path=IsChecked}">
                                <CheckBox x:Name="CheckBox_Proxy_FollowSystemProxy"
                                        Content="{utils:Localize KeyPath=Proxy.FollowSystemProxy}"
                                        Margin="0,0,0,16"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <StackPanel IsEnabled="{Binding ElementName=CheckBox_Proxy_FollowSystemProxy, Path=IsChecked, Converter={StaticResource BoolInverter}}">
                                    <Label Content="{utils:Localize KeyPath=Proxy.Protocol}"
                                            x:Name="Label_Proxy_Protocol"
                                            Style="{StaticResource SettingLabel}"/>
                                    <StackPanel Orientation="Horizontal"
                                            Margin="0,0,0,16">
                                        <RadioButton x:Name="RadioButton_Proxy_Http"
                                                Content="{utils:Localize KeyPath=Proxy.Http}"
                                                GroupName="ProxyProtocol"
                                                IsChecked="True"
                                                Style="{StaticResource ModernRadioButton}"/>
                                        <RadioButton x:Name="RadioButton_Proxy_Socks"
                                                Content="{utils:Localize KeyPath=Proxy.Socks5}"
                                                GroupName="ProxyProtocol"
                                                Margin="20,0,0,0"
                                                Style="{StaticResource ModernRadioButton}"/>
                                    </StackPanel>
                                    <Label Content="{utils:Localize KeyPath=Proxy.ProxyAddress}"
                                            x:Name="Label_Proxy_Address"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_Proxy_Address"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>
                                </StackPanel>
                                <Label Content="{utils:Localize KeyPath=Proxy.ProxyScope}"
                                        Margin="0,8,0,0"
                                        x:Name="Label_Proxy_Scope"
                                        Style="{StaticResource SettingLabel}"/>
                                <CheckBox x:Name="CheckBox_Proxy_ForAllAPI"
                                        Content="{utils:Localize KeyPath=Proxy.ForAllAPI}"
                                        Margin="0,0,0,12"
                                        IsChecked="True"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <StackPanel Margin="20,0,0,0"
                                        IsEnabled="{Binding ElementName=CheckBox_Proxy_ForAllAPI, Path=IsChecked, Converter={StaticResource BoolInverter}}">
                                    <CheckBox x:Name="CheckBox_Proxy_ForOllama"
                                            Content="{utils:Localize KeyPath=Proxy.ForOllama}"
                                            Margin="0,0,0,8"
                                            IsChecked="True"
                                            Style="{StaticResource ModernCheckBox}"/>
                                    <CheckBox x:Name="CheckBox_Proxy_ForOpenAI"
                                            Content="{utils:Localize KeyPath=Proxy.ForOpenAI}"
                                            Margin="0,0,0,8"
                                            IsChecked="True"
                                            Style="{StaticResource ModernCheckBox}"/>
                                    <CheckBox x:Name="CheckBox_Proxy_ForGemini"
                                            Content="{utils:Localize KeyPath=Proxy.ForGemini}"
                                            Margin="0,0,0,8"
                                            IsChecked="True"
                                            Style="{StaticResource ModernCheckBox}"/>
                                    <CheckBox x:Name="CheckBox_Proxy_ForFree"
                                            Content="{utils:Localize KeyPath=Proxy.ForFree}"
                                            Margin="0,0,0,8"
                                            IsChecked="True"
                                            Style="{StaticResource ModernCheckBox}"/>
                                </StackPanel>
                                <CheckBox x:Name="CheckBox_Proxy_ForTTS"
                                        Content="{utils:Localize KeyPath=Proxy.ForTTS}"
                                        Margin="0,0,0,12"
                                        IsChecked="True"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_Proxy_ForASR"
                                        Content="{utils:Localize KeyPath=Proxy.ForASR}"
                                        Margin="0,0,0,12"
                                        IsChecked="True"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_Proxy_ForMcp"
                                        Content="{utils:Localize KeyPath=Proxy.ForMcp}"
                                        Margin="0,0,0,8"
                                        IsChecked="True"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_Proxy_ForPlugin"
                                        Content="{utils:Localize KeyPath=Proxy.ForPlugin}"
                                        Margin="0,0,0,16"
                                        IsChecked="True"
                                        Style="{StaticResource ModernCheckBox}"/>

                                <!-- æ’ä»¶å•†åº—ä»£ç†è®¾ç½® - ç‹¬ç«‹åŒºåŸŸ -->
                                <Label Content="{utils:Localize KeyPath=PluginStore.ProxySettings}"
                                        Margin="0,16,0,0"
                                        x:Name="Label_PluginStore_Proxy"
                                        Style="{StaticResource SettingLabel}"/>
                                <CheckBox x:Name="CheckBox_PluginStore_UseProxy"
                                        Content="{utils:Localize KeyPath=PluginStore.EnableProxy}"
                                        Margin="0,0,0,12"
                                        IsChecked="True"
                                        IsEnabled="{Binding ElementName=CheckBox_Proxy_IsEnabled, Path=IsChecked}"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <StackPanel Margin="20,0,0,0"
                                        IsEnabled="{Binding ElementName=CheckBox_PluginStore_UseProxy, Path=IsChecked}">
                                    <Label Content="{utils:Localize KeyPath=PluginStore.ProxyUrl}"
                                            x:Name="Label_PluginStore_ProxyUrl"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_PluginStore_ProxyUrl"
                                            Margin="0,0,0,8"
                                            Style="{StaticResource ModernTextBox}"/>
                                    <TextBlock Text="{utils:Localize KeyPath=PluginStore.ProxyUrlNote}"
                                            TextWrapping="Wrap"
                                            Foreground="{StaticResource SecondaryTextBrush}"
                                            x:Name="TextBlock_PluginStore_ProxyUrlNote"
                                            FontSize="12"
                                            Margin="0,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </ScrollViewer>
            </TabItem>
            <TabItem Header="{utils:Localize KeyPath=Voice.Tab}"
                    x:Name="Tab_Voice"
                    Style="{StaticResource ModernTabItem}">
                <TabControl Style="{StaticResource ModernTabControl}">
                    <!-- TTS å­æ ‡ç­¾é¡µ -->
                    <TabItem Header="{utils:Localize KeyPath=TTS.Tab}"
                            x:Name="Tab_TTS"
                            Style="{StaticResource ModernTabItem}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <ScrollViewer Grid.Column="0"
                                    VerticalScrollBarVisibility="Auto">
                                <Border Style="{StaticResource CardContainer}" Margin="0,0,10,0">
                                    <StackPanel Style="{StaticResource SettingGroup}">
                                        <CheckBox x:Name="CheckBox_TTS_IsEnabled"
                                        Content="{utils:Localize KeyPath=TTS.Enable}"
                                        Margin="0,0,0,16"
                                        Style="{StaticResource ModernCheckBox}"/>

                                <StackPanel IsEnabled="{Binding ElementName=CheckBox_TTS_IsEnabled, Path=IsChecked}">
                                    <Label Content="{utils:Localize KeyPath=TTS.Provider}"
                                            x:Name="Label_TTS_Provider"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_Provider"
                                            Margin="0,0,0,16"
                                            SelectionChanged="ComboBox_TTS_Provider_SelectionChanged"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="URL" Tag="URL" IsSelected="True"/>
                                        <ComboBoxItem Content="OpenAI" Tag="OpenAI"/>
                                        <ComboBoxItem Content="DIY" Tag="DIY"/>
                                        <ComboBoxItem Content="GPT-SoVITS" Tag="GPT-SoVITS"/>
                                        <ComboBoxItem Content="Free" Tag="Free"/>
                                        <ComboBox.ItemContainerStyle>
                                            <Style TargetType="ComboBoxItem" BasedOn="{StaticResource {x:Type ComboBoxItem}}">
                                                <Setter Property="Padding" Value="12,8"/>
                                                <Setter Property="FontSize" Value="14"/>
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <StackPanel Orientation="Horizontal">
                                                                <Border x:Name="ItemIcon"
                                                                        Background="{StaticResource AccentBrush}"
                                                                        CornerRadius="3"
                                                                        Width="18"
                                                                        Height="18"
                                                                        Margin="0,0,8,0">
                                                                    <TextBlock x:Name="ItemIconText"
                                                                            Text="ðŸ”Š"
                                                                            FontSize="9"
                                                                            Foreground="White"
                                                                            HorizontalAlignment="Center"
                                                                            VerticalAlignment="Center"/>
                                                                </Border>
                                                                <TextBlock Text="{Binding}"
                                                                        VerticalAlignment="Center"/>
                                                            </StackPanel>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding}" Value="URL">
                                                                    <Setter TargetName="ItemIconText" Property="Text" Value="ðŸŒ"/>
                                                                    <Setter TargetName="ItemIcon" Property="Background" Value="#FF6B35"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding}" Value="OpenAI">
                                                                    <Setter TargetName="ItemIconText" Property="Text" Value="AI"/>
                                                                    <Setter TargetName="ItemIcon" Property="Background" Value="#10A37F"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </ComboBox.ItemContainerStyle>
                                    </ComboBox>

                                    <CheckBox x:Name="CheckBox_TTS_OnlyPlayAIResponse"
                                            Content="{utils:Localize KeyPath=TTS.OnlyPlayAIResponse}"
                                            Margin="0,0,0,16"
                                            IsChecked="True"
                                            Style="{StaticResource ModernCheckBox}"/>

                                    <CheckBox x:Name="CheckBox_TTS_UseQueueDownload"
                                            Content="{utils:Localize KeyPath=TTS.UseQueueDownload}"
                                            Margin="0,0,0,16"
                                            IsChecked="False"
                                            Style="{StaticResource ModernCheckBox}"/>

                                    <StackPanel Orientation="Horizontal"
                                            Margin="0,0,0,12">
                                        <TextBlock Text="{utils:Localize KeyPath=TTS.Volume, Suffix=:}"
                                                Width="80"
                                                VerticalAlignment="Center"
                                                x:Name="TextBlock_TTS_Volume"
                                                Foreground="{StaticResource PrimaryTextBrush}"
                                                FontSize="14"/>
                                        <Slider x:Name="Slider_TTS_Volume"
                                                Minimum="0"
                                                Maximum="10"
                                                Value="1"
                                                Width="125"
                                                Margin="10,0"
                                                VerticalAlignment="Center"/>
                                        <TextBlock x:Name="TextBlock_TTS_VolumeValue"
                                                Width="40"
                                                VerticalAlignment="Center"
                                                Foreground="{StaticResource SecondaryTextBrush}"
                                                FontSize="14"/>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal"
                                            Margin="0,0,0,12">
                                        <TextBlock Width="80"
                                                VerticalAlignment="Center"
                                                x:Name="TextBlock_TTS_VolumeGain"
                                                Foreground="{StaticResource PrimaryTextBrush}"
                                                FontSize="14"/>
                                        <Slider x:Name="Slider_TTS_VolumeGain"
                                                Minimum="-20"
                                                Maximum="40"
                                                Value="0"
                                                Width="125"
                                                Margin="10,0"
                                                VerticalAlignment="Center"/>
                                        <TextBlock x:Name="TextBlock_TTS_VolumeGainValue"
                                                Width="50"
                                                VerticalAlignment="Center"
                                                Foreground="{StaticResource SecondaryTextBrush}"
                                                FontSize="14"/>
                                        <TextBlock Text="dB"
                                                VerticalAlignment="Center"
                                                Foreground="{StaticResource SecondaryTextBrush}"
                                                FontSize="12"
                                                Margin="2,0,0,0"/>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal"
                                            Margin="0,0,0,16">
                                        <TextBlock Text="{utils:Localize KeyPath=TTS.Speed, Suffix=:}"
                                                Width="80"
                                                VerticalAlignment="Center"
                                                x:Name="TextBlock_TTS_Speed"
                                                Foreground="{StaticResource PrimaryTextBrush}"
                                                FontSize="14"/>
                                        <Slider x:Name="Slider_TTS_Speed"
                                                Minimum="0.5"
                                                Maximum="2.0"
                                                Value="1"
                                                Width="125"
                                                Margin="10,0"
                                                VerticalAlignment="Center"/>
                                        <TextBlock x:Name="TextBlock_TTS_SpeedValue"
                                                Width="40"
                                                VerticalAlignment="Center"
                                                Foreground="{StaticResource SecondaryTextBrush}"
                                                FontSize="14"/>
                                    </StackPanel>

                                    <WrapPanel HorizontalAlignment="Right" Margin="0,0,0,0">
                                        <Button x:Name="Button_TTS_Test"
                                                Click="Button_TTS_Test_Click"
                                                Style="{StaticResource ModernButton}"/>
                                    </WrapPanel>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </ScrollViewer>

                    <ScrollViewer Grid.Column="1"
                            VerticalScrollBarVisibility="Auto">
                        <Border Style="{StaticResource CardContainer}">
                            <StackPanel Style="{StaticResource SettingGroup}">
                                <!-- URL TTS é…ç½® -->
                                <StackPanel x:Name="Panel_TTS_URL"
                                        Visibility="Visible">
                                    <TextBlock x:Name="TextBlock_TTS_URL_Config"
                                            Text="URL TTS é…ç½®"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,16"/>

                                    <Label x:Name="Label_TTS_URL_BaseUrl"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_URL_BaseUrl"
                                            Text="https://www.example.com"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <Label x:Name="Label_TTS_URL_Voice"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_URL_Voice"
                                            Text="36"
                                            Margin="0,0,0,8"
                                            Style="{StaticResource ModernTextBox}"/>
                                    <TextBlock Text="è¯·è¾“å…¥è¯­éŸ³æ¨¡åž‹IDï¼Œç”¨äºŽåˆ‡æ¢ä¸åŒçš„è¯­éŸ³æ¨¡åž‹ï¼ˆå¦‚ï¼š36ä¸ºå¥³å£°1ï¼Œ37ä¸ºç”·å£°1ç­‰ï¼‰"
                                            x:Name="TextBlock_TTS_URL_Voice_Tip"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label x:Name="Label_TTS_URL_RequestMethod"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_URL_RequestMethod"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="GET" Tag="GET" IsSelected="True"/>
                                        <ComboBoxItem Content="POST" Tag="POST"/>
                                    </ComboBox>

                                    <TextBlock Text="URL TTSæ”¯æŒGETå’ŒPOSTè¯·æ±‚æ–¹æ³•ï¼Œæ”¯æŒå¤šç§è¯­éŸ³ç±»åž‹ã€‚"
                                            x:Name="TextBlock_TTS_URL_Description"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>
                                </StackPanel>

                                <!-- OpenAI TTS é…ç½® -->
                                <StackPanel x:Name="Panel_TTS_OpenAI"
                                        Visibility="Collapsed">
                                    <TextBlock x:Name="TextBlock_TTS_OpenAI_Config"
                                            Text="OpenAI TTS é…ç½®"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,16"/>

                                    <Label x:Name="Label_TTS_OpenAI_BaseUrl"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_OpenAI_BaseUrl"
                                            Text="https://api.fish.audio/v1/tts"
                                            Margin="0,0,0,8"
                                            Style="{StaticResource ModernTextBox}"/>
                                    <TextBlock Text="è¯·è¾“å…¥å®Œæ•´çš„TTS APIåœ°å€ï¼ŒåŒ…å«å®Œæ•´è·¯å¾„ï¼ˆå¦‚ï¼šhttps://api.fish.audio/v1/ttsï¼‰"
                                            x:Name="TextBlock_TTS_OpenAI_BaseUrl_Tip"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label x:Name="Label_TTS_OpenAI_ApiKey"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_OpenAI_ApiKey"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <Label x:Name="Label_TTS_OpenAI_Model"
                                            Style="{StaticResource SettingLabel}"/>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <ComboBox x:Name="ComboBox_TTS_OpenAI_Model"
                                                Grid.Column="0"
                                                IsEditable="True"
                                                Text="tts-1"
                                                Margin="0,0,8,0"
                                                Style="{StaticResource ModernComboBox}"/>
                                        <Button x:Name="Button_TTS_OpenAI_RefreshModels"
                                                Grid.Column="1"
                                                Content="åˆ·æ–°"
                                                Click="Button_TTS_OpenAI_RefreshModels_Click"
                                                Style="{StaticResource SecondaryButton}"
                                                Padding="8,4"
                                                FontSize="12"/>
                                    </Grid>

                                    <Label x:Name="Label_TTS_OpenAI_Voice"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_OpenAI_Voice"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="alloy" Tag="alloy" IsSelected="True"/>
                                        <ComboBoxItem Content="echo" Tag="echo"/>
                                        <ComboBoxItem Content="fable" Tag="fable"/>
                                        <ComboBoxItem Content="onyx" Tag="onyx"/>
                                        <ComboBoxItem Content="nova" Tag="nova"/>
                                        <ComboBoxItem Content="shimmer" Tag="shimmer"/>
                                    </ComboBox>

                                    <Label x:Name="Label_TTS_OpenAI_Format"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_OpenAI_Format"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="mp3" Tag="mp3" IsSelected="True"/>
                                        <ComboBoxItem Content="opus" Tag="opus"/>
                                        <ComboBoxItem Content="aac" Tag="aac"/>
                                        <ComboBoxItem Content="flac" Tag="flac"/>
                                    </ComboBox>

                                    <TextBlock Text="æ”¯æŒOpenAI TTS APIæ ¼å¼çš„æœåŠ¡ï¼Œå¦‚fish.audioç­‰ã€‚éœ€è¦æä¾›æœ‰æ•ˆçš„API Keyã€‚"
                                            x:Name="TextBlock_TTS_OpenAI_Description"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>
                                </StackPanel>
                                <!-- DIY TTS é…ç½® -->
                                <StackPanel x:Name="Panel_TTS_DIY"
                                        Visibility="Collapsed">
                                    <TextBlock x:Name="TextBlock_TTS_DIY_Config"
                                            Text="DIY TTS é…ç½®"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,8"/>

                                    <TextBlock x:Name="TextBlock_TTS_DIY_Description"
                                            Text="è‡ªå®šä¹‰ TTS API é…ç½®ï¼Œæ”¯æŒçµæ´»çš„è¯·æ±‚å®šåˆ¶"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <!-- è¯·æ±‚æ–¹æ³•å’Œ URL -->
                                    <Label Content="è¯·æ±‚é…ç½®" Style="{StaticResource SettingLabel}"/>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="100"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <ComboBox x:Name="ComboBox_TTS_DIY_Method"
                                                Grid.Column="0"
                                                Margin="0,0,8,0"
                                                Style="{StaticResource ModernComboBox}">
                                            <ComboBoxItem Content="POST" IsSelected="True"/>
                                            <ComboBoxItem Content="GET"/>
                                        </ComboBox>
                                        <TextBox x:Name="TextBox_TTS_DIY_BaseUrl"
                                                Grid.Column="1"
                                                Style="{StaticResource ModernTextBox}"
                                                Text="https://api.example.com/tts"/>
                                    </Grid>

                                    <!-- Content-Type -->
                                    <Label Content="Content-Type" Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_DIY_ContentType"
                                            Style="{StaticResource ModernTextBox}"
                                            Text="application/json"
                                            Margin="0,0,0,16"/>

                                    <!-- è‡ªå®šä¹‰è¯·æ±‚å¤´ -->
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Label Content="è‡ªå®šä¹‰è¯·æ±‚å¤´ (Headers)" Style="{StaticResource SettingLabel}"/>
                                        <Button x:Name="Button_TTS_DIY_AddHeader"
                                                Grid.Column="1"
                                                Content="+ æ·»åŠ "
                                                Click="Button_TTS_DIY_AddHeader_Click"
                                                Style="{StaticResource ModernButton}"
                                                Padding="12,4"/>
                                    </Grid>
                                    <DataGrid x:Name="DataGrid_TTS_DIY_Headers"
                                            AutoGenerateColumns="False"
                                            CanUserAddRows="False"
                                            Height="150"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernDataGrid}">
                                        <DataGrid.Columns>
                                            <DataGridCheckBoxColumn Header="å¯ç”¨" Binding="{Binding IsEnabled}" Width="60"/>
                                            <DataGridTextColumn Header="Key" Binding="{Binding Key}" Width="*"/>
                                            <DataGridTextColumn Header="Value" Binding="{Binding Value}" Width="2*"/>
                                            <DataGridTemplateColumn Header="æ“ä½œ" Width="80">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Button Content="åˆ é™¤"
                                                                Click="Button_TTS_DIY_DeleteHeader_Click"
                                                                Style="{StaticResource ModernButton}"
                                                                Padding="8,2"
                                                                FontSize="12"/>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>

                                    <!-- è¯·æ±‚ä½“ -->
                                    <Label Content="è¯·æ±‚ä½“ (Body)" Style="{StaticResource SettingLabel}"/>
                                    <TextBlock Text="ä½¿ç”¨ {text} ä½œä¸ºæ–‡æœ¬å ä½ç¬¦"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,8"/>
                                    <TextBox x:Name="TextBox_TTS_DIY_RequestBody"
                                            Style="{StaticResource ModernTextBox}"
                                            AcceptsReturn="True"
                                            TextWrapping="Wrap"
                                            VerticalScrollBarVisibility="Auto"
                                            Height="120"
                                            FontFamily="Consolas"
                                            Margin="0,0,0,16">
                                        <TextBox.Text><![CDATA[{
  "text": "{text}",
  "voice": "default",
  "format": "mp3"
}]]></TextBox.Text>
                                    </TextBox>

                                    <!-- å“åº”æ ¼å¼ -->
                                    <Label Content="å“åº”éŸ³é¢‘æ ¼å¼" Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_DIY_ResponseFormat"
                                            Style="{StaticResource ModernComboBox}"
                                            Margin="0,0,0,16">
                                        <ComboBoxItem Content="mp3" IsSelected="True"/>
                                        <ComboBoxItem Content="wav"/>
                                        <ComboBoxItem Content="ogg"/>
                                        <ComboBoxItem Content="flac"/>
                                        <ComboBoxItem Content="aac"/>
                                    </ComboBox>

                                    <!-- æµ‹è¯•æŒ‰é’® -->
                                    <Button x:Name="Button_TTS_DIY_Test"
                                            Content="ðŸ”Š æµ‹è¯• TTS"
                                            Click="Button_TTS_DIY_Test_Click"
                                            Style="{StaticResource ModernButton}"
                                            Margin="0,8,0,0"/>
                                </StackPanel>

                                <!-- GPT-SoVITS TTS é…ç½® -->
                                <StackPanel x:Name="Panel_TTS_GPTSoVITS"
                                        Visibility="Collapsed">
                                    <TextBlock Text="{utils:Localize KeyPath=TTS.GPTSoVITS.Config}"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,8"/>
                                    
                                    <TextBlock Text="{utils:Localize KeyPath=TTS.GPTSoVITS.Description}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <!-- API æ¨¡å¼é€‰æ‹© -->
                                    <Label Content="API æ¨¡å¼"
                                          Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_ApiMode"
                                            Margin="0,0,0,8"
                                            SelectionChanged="ComboBox_TTS_GPTSoVITS_ApiMode_SelectionChanged"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="æ•´åˆåŒ…ç½‘é¡µ" Tag="WebUI" IsSelected="True"/>
                                        <ComboBoxItem Content="API v2" Tag="ApiV2"/>
                                    </ComboBox>
                                    <TextBlock Text="æ•´åˆåŒ…ç½‘é¡µæ¨¡å¼ä½¿ç”¨ /infer_single ç«¯ç‚¹ï¼›API v2 æ¨¡å¼ä½¿ç”¨å®˜æ–¹ /tts ç«¯ç‚¹"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.BaseUrl}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox x:Name="TextBox_TTS_GPTSoVITS_BaseUrl"
                                                Grid.Column="0"
                                                Margin="0,0,8,0"
                                                Style="{StaticResource ModernTextBox}"/>
                                        <Button x:Name="Button_TTS_GPTSoVITS_DetectVersion"
                                                Grid.Column="1"
                                                Content="{utils:Localize KeyPath=TTS.GPTSoVITS.DetectVersion}"
                                                Click="Button_TTS_GPTSoVITS_DetectVersion_Click"
                                                Padding="12,6"
                                                Style="{StaticResource ModernButton}"/>
                                    </Grid>

                                    <!-- API v2 ä¸“ç”¨è®¾ç½®é¢æ¿ -->
                                    <StackPanel x:Name="Panel_TTS_GPTSoVITS_ApiV2"
                                            Visibility="Collapsed">
                                        <TextBlock Text="API v2 è®¾ç½®"
                                                Style="{StaticResource SectionHeader}"
                                                FontSize="14"
                                                Margin="0,0,0,8"/>

                                        <Label Content="å‚è€ƒéŸ³é¢‘è·¯å¾„ (å¿…éœ€)"
                                              Style="{StaticResource SettingLabel}"/>
                                        <TextBox x:Name="TextBox_TTS_GPTSoVITS_RefAudioPath"
                                                Margin="0,0,0,8"
                                                Style="{StaticResource ModernTextBox}"/>
                                        <TextBlock Text="æœåŠ¡å™¨ä¸Šçš„å‚è€ƒéŸ³é¢‘æ–‡ä»¶è·¯å¾„ï¼Œç”¨äºŽå£°éŸ³å…‹éš†"
                                                Style="{StaticResource DescriptionText}"
                                                Margin="0,0,0,16"/>

                                        <Label Content="æç¤ºæ–‡æœ¬"
                                              Style="{StaticResource SettingLabel}"/>
                                        <TextBox x:Name="TextBox_TTS_GPTSoVITS_PromptTextV2"
                                                Margin="0,0,0,8"
                                                Style="{StaticResource ModernTextBox}"/>
                                        <TextBlock Text="å‚è€ƒéŸ³é¢‘å¯¹åº”çš„æ–‡æœ¬å†…å®¹ï¼ˆå¯é€‰ï¼‰"
                                                Style="{StaticResource DescriptionText}"
                                                Margin="0,0,0,16"/>

                                        <Label Content="æç¤ºè¯­è¨€"
                                              Style="{StaticResource SettingLabel}"/>
                                        <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_PromptLangV2"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernComboBox}">
                                            <ComboBoxItem Content="ä¸­æ–‡" Tag="zh" IsSelected="True"/>
                                            <ComboBoxItem Content="è‹±æ–‡" Tag="en"/>
                                            <ComboBoxItem Content="æ—¥æ–‡" Tag="ja"/>
                                            <ComboBoxItem Content="éŸ©æ–‡" Tag="ko"/>
                                            <ComboBoxItem Content="ç²¤è¯­" Tag="yue"/>
                                            <ComboBoxItem Content="è‡ªåŠ¨" Tag="auto"/>
                                        </ComboBox>

                                        <Label Content="åˆæˆæ–‡æœ¬è¯­è¨€"
                                              Style="{StaticResource SettingLabel}"/>
                                        <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_TextLangV2"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernComboBox}">
                                            <ComboBoxItem Content="ä¸­æ–‡" Tag="zh" IsSelected="True"/>
                                            <ComboBoxItem Content="è‹±æ–‡" Tag="en"/>
                                            <ComboBoxItem Content="æ—¥æ–‡" Tag="ja"/>
                                            <ComboBoxItem Content="éŸ©æ–‡" Tag="ko"/>
                                            <ComboBoxItem Content="ç²¤è¯­" Tag="yue"/>
                                            <ComboBoxItem Content="è‡ªåŠ¨" Tag="auto"/>
                                            <ComboBoxItem Content="å…¨ä¸­æ–‡" Tag="all_zh"/>
                                            <ComboBoxItem Content="å…¨æ—¥æ–‡" Tag="all_ja"/>
                                            <ComboBoxItem Content="å…¨éŸ©æ–‡" Tag="all_ko"/>
                                            <ComboBoxItem Content="å…¨ç²¤è¯­" Tag="all_yue"/>
                                        </ComboBox>

                                        <Label Content="æ–‡æœ¬åˆ‡åˆ†æ–¹æ³•"
                                              Style="{StaticResource SettingLabel}"/>
                                        <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_TextSplitMethodV2"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernComboBox}">
                                            <ComboBoxItem Content="ä¸åˆ‡" Tag="cut0"/>
                                            <ComboBoxItem Content="å‡‘å››å¥ä¸€åˆ‡" Tag="cut1"/>
                                            <ComboBoxItem Content="å‡‘50å­—ä¸€åˆ‡" Tag="cut2"/>
                                            <ComboBoxItem Content="æŒ‰ä¸­æ–‡å¥å·åˆ‡" Tag="cut3"/>
                                            <ComboBoxItem Content="æŒ‰è‹±æ–‡å¥å·åˆ‡" Tag="cut4"/>
                                            <ComboBoxItem Content="æŒ‰æ ‡ç‚¹ç¬¦å·åˆ‡" Tag="cut5" IsSelected="True"/>
                                        </ComboBox>

                                        <Label Content="è¾“å‡ºæ ¼å¼"
                                              Style="{StaticResource SettingLabel}"/>
                                        <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_MediaType"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernComboBox}">
                                            <ComboBoxItem Content="WAV" Tag="wav" IsSelected="True"/>
                                            <ComboBoxItem Content="OGG" Tag="ogg"/>
                                            <ComboBoxItem Content="AAC" Tag="aac"/>
                                            <ComboBoxItem Content="RAW" Tag="raw"/>
                                        </ComboBox>

                                        <TextBlock Text="API v2 é«˜çº§è®¾ç½®"
                                                Style="{StaticResource SectionHeader}"
                                                FontSize="14"
                                                Margin="0,8,0,8"/>

                                        <Label Content="æ‰¹å¤„ç†å¤§å°"
                                              Style="{StaticResource SettingLabel}"/>
                                        <TextBox x:Name="TextBox_TTS_GPTSoVITS_BatchSize"
                                                Margin="0,0,0,16"
                                                Text="1"
                                                Style="{StaticResource ModernTextBox}"/>

                                        <Label Content="é‡‡æ ·æ­¥æ•°"
                                              Style="{StaticResource SettingLabel}"/>
                                        <TextBox x:Name="TextBox_TTS_GPTSoVITS_SampleSteps"
                                                Margin="0,0,0,16"
                                                Text="32"
                                                Style="{StaticResource ModernTextBox}"/>

                                        <Label Content="é‡å¤æƒ©ç½š"
                                              Style="{StaticResource SettingLabel}"/>
                                        <TextBox x:Name="TextBox_TTS_GPTSoVITS_RepetitionPenalty"
                                                Margin="0,0,0,16"
                                                Text="1.35"
                                                Style="{StaticResource ModernTextBox}"/>

                                        <Label Content="æµå¼æ¨¡å¼"
                                              Style="{StaticResource SettingLabel}"/>
                                        <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_StreamingMode"
                                                Margin="0,0,0,8"
                                                Style="{StaticResource ModernComboBox}">
                                            <ComboBoxItem Content="ç¦ç”¨" Tag="0" IsSelected="True"/>
                                            <ComboBoxItem Content="æœ€ä½³è´¨é‡" Tag="1"/>
                                            <ComboBoxItem Content="ä¸­ç­‰è´¨é‡" Tag="2"/>
                                            <ComboBoxItem Content="å¿«é€Ÿå“åº”" Tag="3"/>
                                        </ComboBox>
                                        <TextBlock Text="æµå¼æ¨¡å¼å¯åŠ å¿«é¦–æ¬¡å“åº”é€Ÿåº¦ï¼Œä½†å¯èƒ½å½±å“éŸ³è´¨"
                                                Style="{StaticResource DescriptionText}"
                                                Margin="0,0,0,16"/>

                                        <CheckBox x:Name="CheckBox_TTS_GPTSoVITS_SuperSampling"
                                                Content="å¯ç”¨è¶…é‡‡æ ·"
                                                Margin="0,0,0,16"
                                                Style="{StaticResource ModernCheckBox}"/>

                                        <TextBlock Text="æ¨¡åž‹æƒé‡è®¾ç½®"
                                                Style="{StaticResource SectionHeader}"
                                                FontSize="14"
                                                Margin="0,8,0,8"/>
                                        <TextBlock Text="æŒ‡å®šæœåŠ¡å™¨ä¸Šçš„æ¨¡åž‹æƒé‡æ–‡ä»¶è·¯å¾„ï¼Œç•™ç©ºåˆ™ä½¿ç”¨æœåŠ¡å™¨é»˜è®¤æ¨¡åž‹"
                                                Style="{StaticResource DescriptionText}"
                                                Margin="0,0,0,8"/>

                                        <Label Content="GPT æ¨¡åž‹æƒé‡è·¯å¾„"
                                              Style="{StaticResource SettingLabel}"/>
                                        <Grid Margin="0,0,0,8">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox x:Name="TextBox_TTS_GPTSoVITS_GptWeightsPath"
                                                    Grid.Column="0"
                                                    Margin="0,0,8,0"
                                                    Style="{StaticResource ModernTextBox}"/>
                                            <Button x:Name="Button_TTS_GPTSoVITS_ApplyGptWeights"
                                                    Grid.Column="1"
                                                    Content="åº”ç”¨"
                                                    Click="Button_TTS_GPTSoVITS_ApplyGptWeights_Click"
                                                    Padding="12,6"
                                                    Style="{StaticResource SecondaryButton}"/>
                                        </Grid>
                                        <TextBlock Text="ä¾‹å¦‚: GPT_SoVITS/pretrained_models/xxx.ckpt"
                                                Style="{StaticResource DescriptionText}"
                                                Margin="0,0,0,16"/>

                                        <Label Content="SoVITS æ¨¡åž‹æƒé‡è·¯å¾„"
                                              Style="{StaticResource SettingLabel}"/>
                                        <Grid Margin="0,0,0,8">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox x:Name="TextBox_TTS_GPTSoVITS_SovitsWeightsPath"
                                                    Grid.Column="0"
                                                    Margin="0,0,8,0"
                                                    Style="{StaticResource ModernTextBox}"/>
                                            <Button x:Name="Button_TTS_GPTSoVITS_ApplySovitsWeights"
                                                    Grid.Column="1"
                                                    Content="åº”ç”¨"
                                                    Click="Button_TTS_GPTSoVITS_ApplySovitsWeights_Click"
                                                    Padding="12,6"
                                                    Style="{StaticResource SecondaryButton}"/>
                                        </Grid>
                                        <TextBlock Text="ä¾‹å¦‚: GPT_SoVITS/pretrained_models/xxx.pth"
                                                Style="{StaticResource DescriptionText}"
                                                Margin="0,0,0,16"/>
                                    </StackPanel>

                                    <!-- WebUI ä¸“ç”¨è®¾ç½®é¢æ¿ -->
                                    <StackPanel x:Name="Panel_TTS_GPTSoVITS_WebUI"
                                            Visibility="Visible">
                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.Version}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_Version"
                                            Margin="0,0,0,8"
                                            SelectionChanged="ComboBox_TTS_GPTSoVITS_Version_SelectionChanged"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="v2" Tag="v2"/>
                                        <ComboBoxItem Content="v2Pro" Tag="v2Pro"/>
                                        <ComboBoxItem Content="v2ProPlus" Tag="v2ProPlus"/>
                                        <ComboBoxItem Content="v3" Tag="v3"/>
                                        <ComboBoxItem Content="v4" Tag="v4" IsSelected="True"/>
                                    </ComboBox>
                                    <TextBlock Text="{utils:Localize KeyPath=TTS.GPTSoVITS.VersionTip}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.Model}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_Model"
                                                Grid.Column="0"
                                                IsEditable="True"
                                                Margin="0,0,8,0"
                                                SelectionChanged="ComboBox_TTS_GPTSoVITS_Model_SelectionChanged"
                                                Style="{StaticResource ModernComboBox}"/>
                                        <Button x:Name="Button_TTS_GPTSoVITS_RefreshModels"
                                                Grid.Column="1"
                                                Content="{utils:Localize KeyPath=TTS.GPTSoVITS.RefreshModels}"
                                                Click="Button_TTS_GPTSoVITS_RefreshModels_Click"
                                                Padding="12,6"
                                                Style="{StaticResource SecondaryButton}"/>
                                    </Grid>
                                    <TextBlock Text="{utils:Localize KeyPath=TTS.GPTSoVITS.ModelTip}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.Language}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_Language"
                                            Margin="0,0,0,8"
                                            SelectionChanged="ComboBox_TTS_GPTSoVITS_Language_SelectionChanged"
                                            Style="{StaticResource ModernComboBox}"/>
                                    <TextBlock Text="{utils:Localize KeyPath=TTS.GPTSoVITS.LanguageTip}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.Emotion}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_Emotion"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernComboBox}"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.TextLanguage}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_TextLanguage"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="ä¸­æ–‡" Tag="ä¸­æ–‡" IsSelected="True"/>
                                        <ComboBoxItem Content="ç²¤è¯­" Tag="ç²¤è¯­"/>
                                        <ComboBoxItem Content="è‹±æ–‡" Tag="è‹±æ–‡"/>
                                        <ComboBoxItem Content="æ—¥æ–‡" Tag="æ—¥æ–‡"/>
                                        <ComboBoxItem Content="éŸ©æ–‡" Tag="éŸ©æ–‡"/>
                                        <ComboBoxItem Content="ä¸­è‹±æ··åˆ" Tag="ä¸­è‹±æ··åˆ"/>
                                        <ComboBoxItem Content="ç²¤è‹±æ··åˆ" Tag="ç²¤è‹±æ··åˆ"/>
                                        <ComboBoxItem Content="æ—¥è‹±æ··åˆ" Tag="æ—¥è‹±æ··åˆ"/>
                                        <ComboBoxItem Content="éŸ©è‹±æ··åˆ" Tag="éŸ©è‹±æ··åˆ"/>
                                        <ComboBoxItem Content="å¤šè¯­ç§æ··åˆ" Tag="å¤šè¯­ç§æ··åˆ"/>
                                        <ComboBoxItem Content="å¤šè¯­ç§æ··åˆ(ç²¤è¯­)" Tag="å¤šè¯­ç§æ··åˆ(ç²¤è¯­)"/>
                                    </ComboBox>

                                    <TextBlock Text="{utils:Localize KeyPath=TTS.GPTSoVITS.AdvancedSettings}"
                                            Style="{StaticResource SectionHeader}"
                                            FontSize="14"
                                            Margin="0,8,0,8"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.SplitMethod}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_TTS_GPTSoVITS_SplitMethod"
                                            Margin="0,0,0,8"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="ä¸åˆ‡" Tag="ä¸åˆ‡"/>
                                        <ComboBoxItem Content="å‡‘å››å¥ä¸€åˆ‡" Tag="å‡‘å››å¥ä¸€åˆ‡"/>
                                        <ComboBoxItem Content="å‡‘50å­—ä¸€åˆ‡" Tag="å‡‘50å­—ä¸€åˆ‡"/>
                                        <ComboBoxItem Content="æŒ‰ä¸­æ–‡å¥å·ã€‚åˆ‡" Tag="æŒ‰ä¸­æ–‡å¥å·ã€‚åˆ‡"/>
                                        <ComboBoxItem Content="æŒ‰è‹±æ–‡å¥å·.åˆ‡" Tag="æŒ‰è‹±æ–‡å¥å·.åˆ‡"/>
                                        <ComboBoxItem Content="æŒ‰æ ‡ç‚¹ç¬¦å·åˆ‡" Tag="æŒ‰æ ‡ç‚¹ç¬¦å·åˆ‡" IsSelected="True"/>
                                    </ComboBox>
                                    <TextBlock Text="{utils:Localize KeyPath=TTS.GPTSoVITS.SplitMethodTip}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.CutPunc}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_GPTSoVITS_CutPunc"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.TopK}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_GPTSoVITS_TopK"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.TopP}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_GPTSoVITS_TopP"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.Temperature}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_GPTSoVITS_Temperature"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <Label Content="{utils:Localize KeyPath=TTS.GPTSoVITS.Speed}"
                                          Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_TTS_GPTSoVITS_Speed"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Free TTS é…ç½® -->
                                <StackPanel x:Name="Panel_TTS_Free"
                                        Visibility="Collapsed">
                                    <TextBlock x:Name="TextBlock_TTS_Free_Config"
                                            Text="{utils:Localize KeyPath=TTS.FreeSettings, Default=Free TTS é…ç½®}"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,16"/>
                                    
                                    <TextBlock Text="{utils:Localize KeyPath=TTS.Free.Description, Default=Free TTS ä½¿ç”¨å†…ç½®çš„å…è´¹è¯­éŸ³åˆæˆæœåŠ¡ï¼Œæ— éœ€é…ç½® API Keyã€‚}"
                                            x:Name="TextBlock_TTS_Free_Description"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <TextBlock Text="{utils:Localize KeyPath=TTS.Free.Provider, Default=æ„Ÿè°¢æä¾›è€… @ycxom}"
                                            x:Name="TextBlock_TTS_Free_Provider"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </ScrollViewer>
                </Grid>
            </TabItem>
            
            <!-- ASR å­æ ‡ç­¾é¡µ -->
            <TabItem Header="{utils:Localize KeyPath=ASR.Tab, Default=è¯­éŸ³è¾“å…¥}"
                    x:Name="Tab_ASR"
                    Style="{StaticResource ModernTabItem}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <ScrollViewer Grid.Column="0"
                            VerticalScrollBarVisibility="Auto">
                        <Border Style="{StaticResource CardContainer}" Margin="0,0,10,0">
                            <StackPanel Style="{StaticResource SettingGroup}">
                                <CheckBox x:Name="CheckBox_ASR_IsEnabled"
                                        Content="{utils:Localize KeyPath=ASR.Enable, Default=å¯ç”¨è¯­éŸ³è¾“å…¥}"
                                        Margin="0,0,0,16"
                                        Style="{StaticResource ModernCheckBox}">
                                    <CheckBox.ToolTip>
                                        <ToolTip>
                                            <TextBlock Text="{utils:Localize KeyPath=ASR.EnableTooltip, Default=å¯ç”¨åŽå¯ä»¥ä½¿ç”¨å¿«æ·é”®è¿›è¡Œè¯­éŸ³è¾“å…¥}"/>
                                        </ToolTip>
                                    </CheckBox.ToolTip>
                                </CheckBox>

                                <StackPanel IsEnabled="{Binding ElementName=CheckBox_ASR_IsEnabled, Path=IsChecked}">
                                    <Label Content="{utils:Localize KeyPath=ASR.Provider, Default=è¯†åˆ«æä¾›å•†}"
                                            x:Name="Label_ASR_Provider"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_ASR_Provider"
                                            Margin="0,0,0,16"
                                            SelectionChanged="ComboBox_ASR_Provider_SelectionChanged"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="OpenAI Whisper" Tag="OpenAI" IsSelected="True"/>
                                        <ComboBoxItem Content="Soniox" Tag="Soniox"/>
                                        <ComboBoxItem Content="Free" Tag="Free"/>
                                    </ComboBox>

                                    <Label Content="{utils:Localize KeyPath=ASR.RecordingDevice, Default=è¾“å…¥è®¾å¤‡}"
                                            x:Name="Label_ASR_RecordingDevice"
                                            Style="{StaticResource SettingLabel}"/>
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <ComboBox x:Name="ComboBox_ASR_RecordingDevice"
                                                Grid.Column="0"
                                                Margin="0,0,8,0"
                                                Style="{StaticResource ModernComboBox}">
                                            <ComboBoxItem Content="è®¾å¤‡ #0 (é»˜è®¤)" Tag="0" IsSelected="True"/>
                                        </ComboBox>
                                        <Button x:Name="Button_ASR_RefreshDevices"
                                                Grid.Column="1"
                                                Content="{utils:Localize KeyPath=ASR.RefreshDevices, Default=åˆ·æ–°è®¾å¤‡}"
                                                Click="Button_ASR_RefreshDevices_Click"
                                                Padding="12,6"
                                                Style="{StaticResource ModernButton}"/>
                                    </Grid>
                                    <TextBlock Text="{utils:Localize KeyPath=ASR.RecordingDeviceTip, Default=é€‰æ‹©ç”¨äºŽè¯­éŸ³è¾“å…¥çš„éº¦å…‹é£Žè®¾å¤‡}"
                                            x:Name="TextBlock_ASR_RecordingDevice_Tip"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <CheckBox x:Name="CheckBox_ASR_AutoSend"
                                            Content="{utils:Localize KeyPath=ASR.AutoSend, Default=è¯†åˆ«å®ŒæˆåŽè‡ªåŠ¨å‘é€}"
                                            Margin="0,0,0,8"
                                            Style="{StaticResource ModernCheckBox}"/>

                                    <CheckBox x:Name="CheckBox_ASR_ShowTranscriptionWindow"
                                            Content="{utils:Localize KeyPath=ASR.ShowTranscriptionWindow, Default=æ˜¾ç¤ºè¯†åˆ«ç»“æžœçª—å£}"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernCheckBox}"/>

                                    <Label Content="{utils:Localize KeyPath=ASR.Hotkey, Default=å¿«æ·é”®}"
                                            x:Name="Label_ASR_Hotkey"
                                            Style="{StaticResource SettingLabel}"/>
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox Grid.Column="0"
                                                x:Name="TextBox_ASR_HotkeyDisplay"
                                                IsReadOnly="True"
                                                Style="{StaticResource ModernTextBox}"
                                                ToolTip="å½“å‰å¿«æ·é”®"/>
                                        <Button Grid.Column="1"
                                                x:Name="Button_ASR_CaptureHotkey"
                                                Content="{utils:Localize KeyPath=ASR.CaptureHotkey, Default=æ•èŽ·å¿«æ·é”®}"
                                                Click="Button_ASR_CaptureHotkey_Click"
                                                Margin="8,0,0,0"
                                                Padding="12,6"
                                                Style="{StaticResource ModernButton}"/>
                                        <Button Grid.Column="2"
                                                x:Name="Button_ASR_ResetHotkey"
                                                Content="{utils:Localize KeyPath=ASR.ResetHotkey, Default=è¿˜åŽŸé»˜è®¤}"
                                                Click="Button_ASR_ResetHotkey_Click"
                                                Margin="8,0,0,0"
                                                Padding="12,6"
                                                Style="{StaticResource ModernButton}"/>
                                    </Grid>
                                    <TextBlock Text="{utils:Localize KeyPath=ASR.HotkeyDescription, Default=ç‚¹å‡»æ•èŽ·æŒ‰é’®åŽï¼ŒæŒ‰ä¸‹æ‚¨æƒ³è¦çš„å¿«æ·é”®ç»„åˆ}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,8"/>
                                    <TextBlock Text="{utils:Localize KeyPath=ASR.DefaultHotkey, Default=é»˜è®¤å¿«æ·é”®: Win + Alt + V}"
                                            Style="{StaticResource DescriptionText}"
                                            Foreground="#666666"
                                            FontSize="11"
                                            Margin="0,0,0,16"/>

                                    <WrapPanel HorizontalAlignment="Right" Margin="0,0,0,0">
                                        <Button x:Name="Button_ASR_Test"
                                                Content="{utils:Localize KeyPath=ASR.TestButton, Default=æµ‹è¯•è¯­éŸ³è¾“å…¥}"
                                                Click="Button_ASR_Test_Click"
                                                Style="{StaticResource ModernButton}"/>
                                    </WrapPanel>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </ScrollViewer>

                    <ScrollViewer Grid.Column="1"
                            VerticalScrollBarVisibility="Auto">
                        <Border Style="{StaticResource CardContainer}">
                            <StackPanel Style="{StaticResource SettingGroup}"

                                IsEnabled="{Binding ElementName=CheckBox_ASR_IsEnabled, Path=IsChecked}">
                                <!-- OpenAI Whisper é…ç½® -->
                                <StackPanel x:Name="Panel_ASR_OpenAI"
                                        Visibility="Visible">
                                    <TextBlock x:Name="TextBlock_ASR_OpenAI_Config"
                                            Text="{utils:Localize KeyPath=ASR.OpenAISettings, Default=OpenAI Whisper é…ç½®}"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,16"/>

                                    <Label x:Name="Label_ASR_OpenAI_BaseUrl"
                                            Content="{utils:Localize KeyPath=ASR.OpenAI.BaseUrl, Default=API åœ°å€}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_ASR_OpenAI_BaseUrl"
                                            Text="https://api.openai.com/v1"
                                            Margin="0,0,0,8"
                                            Style="{StaticResource ModernTextBox}"/>
                                    <TextBlock Text="{utils:Localize KeyPath=ASR.OpenAI.BaseUrlTip, Default=è¯·è¾“å…¥ API åŸºç¡€åœ°å€ï¼ˆä¸å« /audio/transcriptionsï¼‰}"
                                            x:Name="TextBlock_ASR_OpenAI_BaseUrl_Tip"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label x:Name="Label_ASR_OpenAI_ApiKey"
                                            Content="{utils:Localize KeyPath=ASR.OpenAI.ApiKey, Default=API Key}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_ASR_OpenAI_ApiKey"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <Label x:Name="Label_ASR_OpenAI_Model"
                                            Content="{utils:Localize KeyPath=ASR.OpenAI.Model, Default=æ¨¡åž‹}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_ASR_OpenAI_Model"
                                            IsEditable="True"
                                            Text="whisper-1"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="whisper-1" Tag="whisper-1"/>
                                        <ComboBoxItem Content="FunAudioLLM/SenseVoiceSmall" Tag="FunAudioLLM/SenseVoiceSmall"/>
                                    </ComboBox>

                                    <TextBlock Text="{utils:Localize KeyPath=ASR.OpenAI.Description, Default=æ”¯æŒ OpenAI Whisper API æ ¼å¼çš„è¯­éŸ³è¯†åˆ«æœåŠ¡}"
                                            x:Name="TextBlock_ASR_OpenAI_Description"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,8"/>

                                    <!-- æœåŠ¡ç¤ºä¾‹ -->
                                    <TextBlock Style="{StaticResource SectionHeader}"
                                            Margin="0,16,0,8">
                                        <Run Text="{utils:Localize KeyPath=ASR.Examples, Default=æœåŠ¡ç¤ºä¾‹}" FontSize="14"/>
                                    </TextBlock>
                                    <TextBlock Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,4">
                                        <Run Text="â€¢ OpenAI: " FontWeight="SemiBold"/>
                                        <Run Text="https://api.openai.com/v1" Foreground="#2196F3"/>
                                        <Run Text=" | whisper-1"/>
                                    </TextBlock>
                                    <TextBlock Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,4">
                                        <Run Text="â€¢ SiliconFlow: " FontWeight="SemiBold"/>
                                        <Run Text="https://api.siliconflow.cn/v1" Foreground="#2196F3"/>
                                        <Run Text=" | FunAudioLLM/SenseVoiceSmall"/>
                                    </TextBlock>
                                    <TextBlock Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16">
                                        <Run Text="â€¢ è‡ªå®šä¹‰: ä»»ä½•å…¼å®¹ OpenAI Whisper API æ ¼å¼çš„æœåŠ¡"/>
                                    </TextBlock>
                                </StackPanel>

                                <!-- Soniox é…ç½® -->
                                <StackPanel x:Name="Panel_ASR_Soniox"
                                        Visibility="Collapsed">
                                    <TextBlock x:Name="TextBlock_ASR_Soniox_Config"
                                            Text="{utils:Localize KeyPath=ASR.SonioxSettings, Default=Soniox é…ç½®}"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,16"/>

                                    <Label x:Name="Label_ASR_Soniox_BaseUrl"
                                            Content="{utils:Localize KeyPath=ASR.Soniox.BaseUrl, Default=API åœ°å€}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_ASR_Soniox_BaseUrl"
                                            Text="https://api.soniox.com"
                                            Margin="0,0,0,8"
                                            Style="{StaticResource ModernTextBox}"/>
                                    <TextBlock Text="{utils:Localize KeyPath=ASR.Soniox.BaseUrlTip, Default=è¯·è¾“å…¥ Soniox API åŸºç¡€åœ°å€ï¼ˆä¸å« /v1ï¼‰}"
                                            x:Name="TextBlock_ASR_Soniox_BaseUrl_Tip"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label x:Name="Label_ASR_Soniox_ApiKey"
                                            Content="{utils:Localize KeyPath=ASR.Soniox.ApiKey, Default=API Key}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_ASR_Soniox_ApiKey"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <Label x:Name="Label_ASR_Soniox_Model"
                                            Content="{utils:Localize KeyPath=ASR.Soniox.Model, Default=æ¨¡åž‹}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <ComboBox x:Name="ComboBox_ASR_Soniox_Model"
                                                Grid.Column="0"
                                                IsEditable="True"
                                                Text="stt-rt-v3"
                                                Margin="0,0,8,0"
                                                Style="{StaticResource ModernComboBox}">
                                            <ComboBoxItem Content="stt-rt-v3 (Speech-to-Text Real-time v3)" Tag="stt-rt-v3"/>
                                            <ComboBoxItem Content="stt-async-v3 (Speech-to-Text Async v3)" Tag="stt-async-v3"/>
                                        </ComboBox>
                                        <Button x:Name="Button_ASR_Soniox_RefreshModels"
                                                Grid.Column="1"
                                                Content="{utils:Localize KeyPath=ASR.Soniox.RefreshModels, Default=åˆ·æ–°æ¨¡åž‹åˆ—è¡¨}"
                                                Click="Button_ASR_Soniox_RefreshModels_Click"
                                                Padding="12,6"
                                                Style="{StaticResource ModernButton}"/>
                                    </Grid>
                                    <TextBlock Text="{utils:Localize KeyPath=ASR.Soniox.ModelTip, Default=é€‰æ‹© Soniox è¯­éŸ³è¯†åˆ«æ¨¡åž‹ï¼Œç‚¹å‡»åˆ·æ–°æŒ‰é’®èŽ·å–æœ€æ–°æ¨¡åž‹åˆ—è¡¨}"
                                            x:Name="TextBlock_ASR_Soniox_Model_Tip"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <Label x:Name="Label_ASR_Soniox_Language"
                                            Content="{utils:Localize KeyPath=ASR.Soniox.Language, Default=è¯­è¨€}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_ASR_Soniox_Language"
                                            IsEditable="False"
                                            Margin="0,0,0,8"
                                            Style="{StaticResource ModernComboBox}">
                                        <!-- è¯­è¨€åˆ—è¡¨å°†æ ¹æ®é€‰æ‹©çš„æ¨¡åž‹åŠ¨æ€å¡«å…… -->
                                    </ComboBox>
                                    <TextBlock Text="{utils:Localize KeyPath=ASR.Soniox.LanguageTip, Default=é€‰æ‹©è¯­éŸ³è¯†åˆ«è¯­è¨€ï¼Œè¯­è¨€åˆ—è¡¨æ ¹æ®æ‰€é€‰æ¨¡åž‹åŠ¨æ€æ›´æ–°}"
                                            x:Name="TextBlock_ASR_Soniox_Language_Tip"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <CheckBox x:Name="CheckBox_ASR_Soniox_EnablePunctuation"
                                            Content="{utils:Localize KeyPath=ASR.Soniox.EnablePunctuation, Default=å¯ç”¨æ ‡ç‚¹ç¬¦å·}"
                                            Margin="0,0,0,8"
                                            IsChecked="True"
                                            Style="{StaticResource ModernCheckBox}"/>

                                    <CheckBox x:Name="CheckBox_ASR_Soniox_EnableProfanityFilter"
                                            Content="{utils:Localize KeyPath=ASR.Soniox.EnableProfanityFilter, Default=å¯ç”¨è„è¯è¿‡æ»¤}"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernCheckBox}"/>

                                    <TextBlock Text="{utils:Localize KeyPath=ASR.Soniox.Description, Default=Soniox æä¾›é«˜ç²¾åº¦çš„è¯­éŸ³è¯†åˆ«æœåŠ¡ï¼Œæ”¯æŒå¤šç§è¯­è¨€}"
                                            x:Name="TextBlock_ASR_Soniox_Description"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>
                                </StackPanel>

                                <!-- Free é…ç½® -->
                                <StackPanel x:Name="Panel_ASR_Free"
                                        Visibility="Collapsed">
                                    <TextBlock x:Name="TextBlock_ASR_Free_Config"
                                            Text="{utils:Localize KeyPath=ASR.FreeSettings, Default=Free ASR é…ç½®}"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,16"/>

                                    <TextBlock Text="{utils:Localize KeyPath=ASR.Free.Description, Default=Free ASR ä½¿ç”¨å†…ç½®çš„å…è´¹è¯­éŸ³è¯†åˆ«æœåŠ¡ï¼Œæ— éœ€é…ç½® API Keyã€‚}"
                                            x:Name="TextBlock_ASR_Free_Description"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <TextBlock Text="{utils:Localize KeyPath=ASR.Free.Provider, Default=æ„Ÿè°¢æä¾›è€…@è™šæ‹Ÿæ¡Œå® æ¨¡æ‹Ÿå™¨åˆ¶ä½œç»„}"
                                            x:Name="TextBlock_ASR_Free_Provider"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </ScrollViewer>
                </Grid>
            </TabItem>
                </TabControl>
            </TabItem>
            
            <!-- Screenshot ç‹¬ç«‹æ ‡ç­¾é¡µ -->
            <TabItem Header="{utils:Localize KeyPath=Screenshot.Tab, Default=æˆªå›¾ä¸ŽOCR}"
                    x:Name="Tab_Screenshot_Main"
                    Style="{StaticResource ModernTabItem}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <ScrollViewer Grid.Column="0"
                            VerticalScrollBarVisibility="Auto">
                        <Border Style="{StaticResource CardContainer}" Margin="0,0,10,0">
                            <StackPanel Style="{StaticResource SettingGroup}">
                                <CheckBox x:Name="CheckBox_Screenshot_Main_IsEnabled"
                                        Content="{utils:Localize KeyPath=Screenshot.Enable, Default=å¯ç”¨æˆªå›¾åŠŸèƒ½}"
                                        Margin="0,0,0,16"
                                        Style="{StaticResource ModernCheckBox}">
                                    <CheckBox.ToolTip>
                                        <ToolTip>
                                            <TextBlock Text="{utils:Localize KeyPath=Screenshot.EnableTooltip, Default=å¯ç”¨åŽå¯ä»¥ä½¿ç”¨å¿«æ·é”®è¿›è¡Œæˆªå›¾}"/>
                                        </ToolTip>
                                    </CheckBox.ToolTip>
                                </CheckBox>

                                <StackPanel IsEnabled="{Binding ElementName=CheckBox_Screenshot_Main_IsEnabled, Path=IsChecked}">
                                    <Label Content="{utils:Localize KeyPath=Screenshot.ProcessingMode, Default=å¤„ç†æ¨¡å¼}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_Screenshot_Main_ProcessingMode"
                                            Margin="0,0,0,8"
                                            SelectionChanged="ComboBox_Screenshot_ProcessingMode_SelectionChanged"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="{utils:Localize KeyPath=Screenshot.Mode.NativeMultimodal, Default=åŽŸç”Ÿå¤šæ¨¡æ€}" Tag="NativeMultimodal" IsSelected="True"/>
                                        <ComboBoxItem Content="{utils:Localize KeyPath=Screenshot.Mode.PreprocessingMultimodal, Default=å‰ç½®å¤šæ¨¡æ€}" Tag="PreprocessingMultimodal"/>
                                        <ComboBoxItem Content="{utils:Localize KeyPath=Screenshot.Mode.OCRApi, Default=OCR API}" Tag="OCRApi"/>
                                    </ComboBox>
                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.ProcessingModeTip, Default=åŽŸç”Ÿå¤šæ¨¡æ€ï¼šç›´æŽ¥å‘é€å›¾ç‰‡ç»™è§†è§‰LLMï¼›å‰ç½®å¤šæ¨¡æ€ï¼šå…ˆåˆ†æžå›¾ç‰‡å†å‘é€æè¿°ç»™ä¸»LLMï¼›OCRï¼šæå–æ–‡å­—}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <CheckBox x:Name="CheckBox_Screenshot_Main_AutoSend"
                                            Content="{utils:Localize KeyPath=Screenshot.AutoSend, Default=æˆªå›¾åŽè‡ªåŠ¨å‘é€}"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernCheckBox}"/>

                                    <Label Content="{utils:Localize KeyPath=Screenshot.Hotkey, Default=å¿«æ·é”®}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox Grid.Column="0"
                                                x:Name="TextBox_Screenshot_Main_HotkeyDisplay"
                                                IsReadOnly="True"
                                                Style="{StaticResource ModernTextBox}"
                                                ToolTip="å½“å‰å¿«æ·é”®"/>
                                        <Button Grid.Column="1"
                                                x:Name="Button_Screenshot_Main_CaptureHotkey"
                                                Content="{utils:Localize KeyPath=Screenshot.CaptureHotkey, Default=æ•èŽ·å¿«æ·é”®}"
                                                Click="Button_Screenshot_CaptureHotkey_Click"
                                                Margin="8,0,0,0"
                                                Padding="12,6"
                                                Style="{StaticResource ModernButton}"/>
                                        <Button Grid.Column="2"
                                                x:Name="Button_Screenshot_Main_ResetHotkey"
                                                Content="{utils:Localize KeyPath=Screenshot.ResetHotkey, Default=è¿˜åŽŸé»˜è®¤}"
                                                Click="Button_Screenshot_ResetHotkey_Click"
                                                Margin="8,0,0,0"
                                                Padding="12,6"
                                                Style="{StaticResource ModernButton}"/>
                                    </Grid>
                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.HotkeyDescription, Default=ç‚¹å‡»æ•èŽ·æŒ‰é’®åŽï¼ŒæŒ‰ä¸‹æ‚¨æƒ³è¦çš„å¿«æ·é”®ç»„åˆ}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,8"/>
                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.DefaultHotkey, Default=é»˜è®¤å¿«æ·é”®: Win + Alt + S}"
                                            Style="{StaticResource DescriptionText}"
                                            Foreground="#666666"
                                            FontSize="11"
                                            Margin="0,0,0,16"/>

                                    <WrapPanel HorizontalAlignment="Right" Margin="0,0,0,0">
                                        <Button x:Name="Button_Screenshot_Main_Test"
                                                Content="{utils:Localize KeyPath=Screenshot.TestButton, Default=æµ‹è¯•æˆªå›¾}"
                                                Click="Button_Screenshot_Test_Click"
                                                Style="{StaticResource ModernButton}"/>
                                    </WrapPanel>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </ScrollViewer>

                    <ScrollViewer Grid.Column="1"
                            VerticalScrollBarVisibility="Auto">
                        <Border Style="{StaticResource CardContainer}">
                            <StackPanel Style="{StaticResource SettingGroup}"
                                IsEnabled="{Binding ElementName=CheckBox_Screenshot_Main_IsEnabled, Path=IsChecked}">
                                <!-- OCR é…ç½® -->
                                <StackPanel x:Name="Panel_Screenshot_Main_OCR"
                                        Visibility="Collapsed">
                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.OCRSettings, Default=OCR é…ç½®}"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,16"/>

                                    <Label Content="{utils:Localize KeyPath=Screenshot.OCR.Provider, Default=OCR æä¾›å•†}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_Screenshot_Main_OCR_Provider"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="OpenAI" Tag="OpenAI" IsSelected="True"/>
                                        <ComboBoxItem Content="Free" Tag="Free"/>
                                    </ComboBox>

                                    <Label Content="{utils:Localize KeyPath=Screenshot.OCR.BaseUrl, Default=API åœ°å€}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_Screenshot_Main_OCR_BaseUrl"
                                            Text="https://api.openai.com/v1"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <Label Content="{utils:Localize KeyPath=Screenshot.OCR.ApiKey, Default=API Key}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <TextBox x:Name="TextBox_Screenshot_Main_OCR_ApiKey"
                                            Margin="0,0,0,16"
                                            Style="{StaticResource ModernTextBox}"/>

                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.OCR.Description, Default=OCR æ¨¡å¼å°†ä½¿ç”¨ OpenAI Vision API è¯†åˆ«å›¾åƒä¸­çš„æ–‡å­—}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>
                                </StackPanel>

                                <!-- åŽŸç”Ÿå¤šæ¨¡æ€è¯´æ˜Žï¼ˆä»…åœ¨åŽŸç”Ÿå¤šæ¨¡æ€æ¨¡å¼ä¸‹æ˜¾ç¤ºï¼‰ -->
                                <StackPanel x:Name="Panel_Screenshot_Main_NativeMultimodal"
                                        Visibility="Visible">
                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.NativeMultimodalSettings, Default=åŽŸç”Ÿå¤šæ¨¡æ€é…ç½®}"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,16"/>

                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.Multimodal.Description, Default=åŽŸç”Ÿå¤šæ¨¡æ€æ¨¡å¼å°†æˆªå›¾ç›´æŽ¥å‘é€ç»™æ”¯æŒè§†è§‰èƒ½åŠ›çš„ LLM è¿›è¡Œåˆ†æžã€‚}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.Multimodal.EnableVisionTip, Default=è¯·ç¡®ä¿åœ¨ LLM è®¾ç½®ä¸­ä¸ºç›¸åº”èŠ‚ç‚¹å¯ç”¨äº†è§†è§‰èƒ½åŠ› (EnableVision)ã€‚}"
                                            Style="{StaticResource DescriptionText}"
                                            Foreground="#FF9800"
                                            Margin="0,0,0,16"/>

                                    <TextBlock Style="{StaticResource SectionHeader}"
                                            Margin="0,16,0,8">
                                        <Run Text="{utils:Localize KeyPath=Screenshot.SupportedModels, Default=æ”¯æŒçš„æ¨¡åž‹}" FontSize="14"/>
                                    </TextBlock>
                                    <TextBlock Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,4">
                                        <Run Text="â€¢ OpenAI: " FontWeight="SemiBold"/>
                                        <Run Text="gpt-4o, gpt-4o-mini, gpt-4-vision-preview"/>
                                    </TextBlock>
                                    <TextBlock Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,4">
                                        <Run Text="â€¢ Gemini: " FontWeight="SemiBold"/>
                                        <Run Text="gemini-pro-vision, gemini-1.5-pro, gemini-1.5-flash"/>
                                    </TextBlock>
                                    <TextBlock Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16">
                                        <Run Text="â€¢ Ollama: " FontWeight="SemiBold"/>
                                        <Run Text="llava, bakllava, llava-llama3"/>
                                    </TextBlock>
                                </StackPanel>

                                <!-- å‰ç½®å¤šæ¨¡æ€é…ç½®ï¼ˆä»…åœ¨å‰ç½®å¤šæ¨¡æ€æ¨¡å¼ä¸‹æ˜¾ç¤ºï¼‰ -->
                                <StackPanel x:Name="Panel_Screenshot_Main_Multimodal"
                                        Visibility="Collapsed">
                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.PreprocessingSettings, Default=å‰ç½®å¤šæ¨¡æ€é…ç½®}"
                                            Style="{StaticResource SectionHeader}"
                                            Margin="0,0,0,16"/>

                                    <TextBlock Text="{utils:Localize KeyPath=Screenshot.Multimodal.PreprocessDescription, Default=å‰ç½®å¤šæ¨¡æ€æ¨¡å¼ï¼šå…ˆç”¨å¤šæ¨¡æ€æ¨¡åž‹åˆ†æžå›¾ç‰‡ç”Ÿæˆæè¿°ï¼Œå†å°†æè¿°ä¸Žé—®é¢˜å‘é€ç»™ä¸» LLMï¼Œä¿æŒå¯¹è¯ä½“éªŒä¸€è‡´ã€‚}"
                                            Style="{StaticResource DescriptionText}"
                                            Margin="0,0,0,16"/>

                                    <!-- å¤šæ¨¡æ€æä¾›å•†é€‰æ‹© -->
                                    <Label Content="{utils:Localize KeyPath=Screenshot.Multimodal.Provider, Default=å¤šæ¨¡æ€æä¾›å•†}"
                                            Style="{StaticResource SettingLabel}"/>
                                    <ComboBox x:Name="ComboBox_Screenshot_Main_Multimodal_Provider"
                                            Margin="0,0,0,8"
                                            SelectionChanged="ComboBox_Screenshot_MultimodalProvider_SelectionChanged"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="{utils:Localize KeyPath=Screenshot.Multimodal.Provider.Free, Default=Free æ¸ é“}" Tag="Free" IsSelected="True"/>
                                        <ComboBoxItem Content="{utils:Localize KeyPath=Screenshot.Multimodal.Provider.VisionChannels, Default=å¯ç”¨è§†è§‰çš„æ¸ é“}" Tag="VisionChannels"/>
                                    </ComboBox>
                                    <!-- Free æ¸ é“æç¤ºï¼ˆä»…å½“é€‰æ‹© Free æ—¶æ˜¾ç¤ºï¼‰ -->
                                    <TextBlock x:Name="TextBlock_Screenshot_Main_FreeProviderTip"
                                            Text="{utils:Localize KeyPath=Screenshot.Multimodal.FreeProviderTip, Default=ä½¿ç”¨ Free æ¸ é“éœ€è¦åœ¨ LLM è®¾ç½® -> Free æŽ¥å£ ä¸­å¯ç”¨ EnableVision é€‰é¡¹}"
                                            Style="{StaticResource DescriptionText}"
                                            Foreground="#FF9800"
                                            Visibility="Visible"
                                            Margin="0,0,0,16"/>

                                    <!-- VisionChannels æç¤ºï¼ˆä»…å½“é€‰æ‹© VisionChannels æ—¶æ˜¾ç¤ºï¼‰ -->
                                    <TextBlock x:Name="TextBlock_Screenshot_Main_VisionChannelsProviderTip"
                                            Text="{utils:Localize KeyPath=Screenshot.Multimodal.VisionChannelsProviderTip, Default=å¯ç”¨è§†è§‰çš„æ¸ é“éœ€è¦åœ¨ LLM è®¾ç½®ä¸­ä¸ºç›¸åº”èŠ‚ç‚¹å¯ç”¨ EnableVision}"
                                            Style="{StaticResource DescriptionText}"
                                            Foreground="#FF9800"
                                            Visibility="Collapsed"
                                            Margin="0,0,0,16"/>

                                    <!-- è§†è§‰èŠ‚ç‚¹åˆ—è¡¨ï¼ˆä»…å½“é€‰æ‹© VisionChannels æ—¶æ˜¾ç¤ºï¼‰ -->
                                    <StackPanel x:Name="Panel_Screenshot_Main_VisionNodes"
                                            Visibility="Collapsed">
                                        <Label Content="{utils:Localize KeyPath=Screenshot.Multimodal.SelectNodes, Default=é€‰æ‹©è§†è§‰èŠ‚ç‚¹ï¼ˆå¯å¤šé€‰ï¼‰}"
                                                Style="{StaticResource SettingLabel}"/>
                                        <ListBox x:Name="ListBox_Screenshot_Main_VisionNodes"
                                                Height="150"
                                                Margin="0,0,0,8"
                                                SelectionMode="Multiple"
                                                Background="{StaticResource BackgroundBrush}"
                                                BorderBrush="{StaticResource BorderBrush}"
                                                BorderThickness="1"
                                                SelectionChanged="ListBox_Screenshot_VisionNodes_SelectionChanged">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="{Binding DisplayName}" VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                        <TextBlock x:Name="TextBlock_Screenshot_Main_NoVisionNodes"
                                                Text="{utils:Localize KeyPath=Screenshot.Multimodal.NoVisionNodes, Default=æ²¡æœ‰å¯ç”¨çš„è§†è§‰èŠ‚ç‚¹ï¼Œè¯·åœ¨ LLM è®¾ç½®ä¸­å¯ç”¨ EnableVision}"
                                                Style="{StaticResource DescriptionText}"
                                                Foreground="#FF5722"
                                                Visibility="Collapsed"
                                                Margin="0,0,0,8"/>
                                        <TextBlock Text="{utils:Localize KeyPath=Screenshot.Multimodal.LoadBalanceTip, Default=é€‰æ‹©å¤šä¸ªèŠ‚ç‚¹æ—¶å°†éšæœºé€‰æ‹©ä¸€ä¸ªè¿›è¡Œè¯·æ±‚ï¼Œå¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–èŠ‚ç‚¹}"
                                                Style="{StaticResource DescriptionText}"
                                                Margin="0,0,0,16"/>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </ScrollViewer>
                </Grid>
            </TabItem>
            
            <TabItem Header="{utils:Localize KeyPath=Language.Tab}"
                    x:Name="Tab_Language"
                    Style="{StaticResource ModernTabItem}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Border Style="{StaticResource CardContainer}">
                        <StackPanel Style="{StaticResource SettingGroup}">
                            <Label Content="{utils:Localize KeyPath=Language.Tab}"
                                    x:Name="Label_Language"
                                    Style="{StaticResource SettingLabel}"/>
                            <ComboBox x:Name="ComboBox_Language"
                                    Margin="0,0,0,16"
                                    Style="{StaticResource LanguageComboBox}"/>
                            <Label Content="{utils:Localize KeyPath=Language.PromptLanguage}"
                                    x:Name="Label_PromptLanguage"
                                    Style="{StaticResource SettingLabel}"/>
                            <ComboBox x:Name="ComboBox_PromptLanguage"
                                    Margin="0,0,0,8"
                                    Style="{StaticResource LanguageComboBox}"/>
                            <TextBlock x:Name="TextBlock_PromptLanguageTooltip"
                                    TextWrapping="Wrap"
                                    Foreground="{StaticResource SecondaryTextBrush}"
                                    FontSize="12"
                                    Margin="0,0,0,0"/>
                        </StackPanel>
                    </Border>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="{utils:Localize KeyPath=Advanced_Options.Tab}"
                    x:Name="Tab_Advanced"
                    Style="{StaticResource ModernTabItem}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Border Style="{StaticResource CardContainer}">
                        <StackPanel Style="{StaticResource SettingGroup}">
                            <CheckBox x:Name="CheckBox_EnableAction"
                                    Content="{utils:Localize KeyPath=Advanced_Options.EnableAction}"
                                    Margin="0,0,0,16"
                                    IsChecked="True"
                                    Style="{StaticResource ModernCheckBox}">
                                <CheckBox.ToolTip>
                                    <ToolTip>
                                        <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.EnableActionToolTip}"/>
                                    </ToolTip>
                                </CheckBox.ToolTip>
                            </CheckBox>
                            <StackPanel Margin="20,0,0,0">
                                <CheckBox x:Name="CheckBox_EnableVPetSettingsControl"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableVPetSettingsControl}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableAction}"
                                        IsChecked="False"
                                        Margin="0,0,0,8"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_EnableMediaPlayback"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableMediaPlayback}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableAction}"
                                        IsChecked="True"
                                        Margin="0,0,0,8"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_EnableBuy"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableBuy}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableAction}"
                                        IsChecked="True"
                                        Margin="0,0,0,8"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_EnableState"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableState}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableAction}"
                                        IsChecked="True"
                                        Margin="0,0,0,8"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_EnableExtendedState"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableExtendedState}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableState}"
                                        IsChecked="False"
                                        Margin="20,0,0,8"
                                        Style="{StaticResource ModernCheckBox}">
                                    <CheckBox.ToolTip>
                                        <ToolTip>
                                            <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.EnableExtendedStateToolTip}"/>
                                        </ToolTip>
                                    </CheckBox.ToolTip>
                                </CheckBox>
                                <CheckBox x:Name="CheckBox_ReduceInputTokenUsage"
                                        Content="{utils:Localize KeyPath=Advanced_Options.ReduceInputTokenUsage}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableState}"
                                        IsChecked="False"
                                        Margin="20,0,0,8"
                                        Style="{StaticResource ModernCheckBox}">
                                    <CheckBox.ToolTip>
                                        <ToolTip>
                                            <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.ReduceInputTokenUsageToolTip}"/>
                                        </ToolTip>
                                    </CheckBox.ToolTip>
                                </CheckBox>
                                <CheckBox x:Name="CheckBox_EnableActionExecution"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableActionExecution}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableAction}"
                                        IsChecked="True"
                                        Margin="0,0,0,8"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_EnableMove"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableMove}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableAction}"
                                        IsChecked="True"
                                        Margin="0,0,0,8"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_EnableTime"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableTime}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableAction}"
                                        IsChecked="True"
                                        Margin="0,0,0,8"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <CheckBox x:Name="CheckBox_EnableBuyFeedback"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableAction}"
                                        IsChecked="True"
                                        Margin="0,0,0,16"
                                        Style="{StaticResource ModernCheckBox}">
                                    <CheckBox.ToolTip>
                                        <ToolTip>
                                            <TextBlock x:Name="ToolTip_EnableBuyFeedback" Text="{utils:Localize KeyPath=BuyInteraction.EnableTooltip}"/>
                                        </ToolTip>
                                    </CheckBox.ToolTip>
                                </CheckBox>
                                <CheckBox x:Name="CheckBox_EnableLiveMode"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableLiveMode}"
                                        IsChecked="False"
                                        Margin="0,0,0,16"
                                        Style="{StaticResource ModernCheckBox}">
                                    <CheckBox.ToolTip>
                                        <ToolTip>
                                            <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.EnableLiveModeToolTip}"/>
                                        </ToolTip>
                                    </CheckBox.ToolTip>
                                </CheckBox>
                                <CheckBox x:Name="CheckBox_LimitStateChanges"
                                        Content="{utils:Localize KeyPath=Advanced_Options.LimitStateChanges}"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableAction}"
                                        IsChecked="False"
                                        Margin="0,0,0,16"
                                        Style="{StaticResource ModernCheckBox}">
                                    <CheckBox.ToolTip>
                                        <ToolTip>
                                            <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.LimitStateChangesToolTip}"/>
                                        </ToolTip>
                                    </CheckBox.ToolTip>
                                </CheckBox>
                                <CheckBox x:Name="CheckBox_EnableHistoryCompression"
                                        Content="{utils:Localize KeyPath=Advanced_Options.EnableHistoryCompression}"
                                        Margin="0,0,0,12"
                                        Style="{StaticResource ModernCheckBox}"/>
                                <!-- åŽ‹ç¼©è§¦å‘æ¨¡å¼ -->
                                <StackPanel Orientation="Horizontal"
                                        Margin="20,0,0,12">
                                    <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.CompressionMode}"
                                            VerticalAlignment="Center"
                                            x:Name="TextBlock_CompressionMode"
                                            Foreground="{StaticResource PrimaryTextBrush}"
                                            FontSize="14"
                                            Width="80"/>
                                    <ComboBox x:Name="ComboBox_CompressionMode"
                                            Width="150"
                                            Margin="10,0"
                                            Style="{StaticResource ModernComboBox}">
                                        <ComboBoxItem Content="{utils:Localize KeyPath=Advanced_Options.CompressionMode_MessageCount}" Tag="MessageCount"/>
                                        <ComboBoxItem Content="{utils:Localize KeyPath=Advanced_Options.CompressionMode_TokenCount}" Tag="TokenCount"/>
                                        <ComboBoxItem Content="{utils:Localize KeyPath=Advanced_Options.CompressionMode_Both}" Tag="Both"/>
                                    </ComboBox>
                                </StackPanel>
                                
                                <!-- æ¶ˆæ¯æ•°é‡é˜ˆå€¼ -->
                                <StackPanel Orientation="Horizontal"
                                        Margin="20,0,0,12">
                                    <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.HistoryCompressionThreshold}"
                                            VerticalAlignment="Center"
                                            x:Name="TextBlock_HistoryCompressionThreshold"
                                            Foreground="{StaticResource PrimaryTextBrush}"
                                            FontSize="14"
                                            Width="80"/>
                                    <TextBox x:Name="TextBox_HistoryCompressionThreshold"
                                            Width="110"
                                            Margin="10,0"
                                            Style="{StaticResource ModernTextBox}"/>
                                    <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.CurrentContextLength}"
                                            VerticalAlignment="Center"
                                            Margin="20,0,5,0"
                                            x:Name="TextBlock_CurrentContextLengthLabel"
                                            Foreground="{StaticResource PrimaryTextBrush}"
                                            FontSize="14"/>
                                    <TextBlock x:Name="TextBlock_CurrentContextLength"
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource SecondaryTextBrush}"
                                            FontSize="14"/>
                                </StackPanel>
                                
                                <!-- Tokenæ•°é‡é˜ˆå€¼ -->
                                <StackPanel Orientation="Horizontal"
                                        Margin="20,0,0,0">
                                    <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.HistoryCompressionTokenThreshold}"
                                            VerticalAlignment="Center"
                                            x:Name="TextBlock_HistoryCompressionTokenThreshold"
                                            Foreground="{StaticResource PrimaryTextBrush}"
                                            FontSize="14"
                                            Width="80"/>
                                    <TextBox x:Name="TextBox_HistoryCompressionTokenThreshold"
                                            Width="110"
                                            Margin="10,0"
                                            Style="{StaticResource ModernTextBox}"/>
                                    <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.CurrentTokenCount}"
                                            VerticalAlignment="Center"
                                            Margin="20,0,5,0"
                                            x:Name="TextBlock_CurrentTokenCountLabel"
                                            Foreground="{StaticResource PrimaryTextBrush}"
                                            FontSize="14"/>
                                    <TextBlock x:Name="TextBlock_CurrentTokenCount"
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource SecondaryTextBrush}"
                                            FontSize="14"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- å¼ºåŒ–è®°å¿†é«˜çº§è®¾ç½® -->
                            <Separator Margin="0,20,0,20"
                                     Background="{StaticResource BorderBrush}"
                                     Height="1"/>
                            <TextBlock Name="TextBlock_RecordsAdvancedTitle"
                                     Text="{utils:Localize KeyPath=Advanced_Options.RecordsAdvancedTitle}"
                                     FontSize="16"
                                     FontWeight="SemiBold"
                                     Margin="0,0,0,16"
                                     Foreground="{StaticResource PrimaryTextBrush}"/>
                            
                            <!-- è®°å¿†è¡°é€€è½®æ•° -->
                            <StackPanel Orientation="Horizontal"
                                        Margin="0,0,0,12">
                                <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.WeightDecayTurns}"
                                        VerticalAlignment="Center"
                                        x:Name="TextBlock_WeightDecayTurns"
                                        Foreground="{StaticResource PrimaryTextBrush}"
                                        FontSize="14"
                                        Width="200"/>
                                <TextBox x:Name="TextBox_WeightDecayTurns"
                                        Width="110"
                                        Margin="10,0"
                                        Style="{StaticResource ModernTextBox}">
                                    <TextBox.ToolTip>
                                        <ToolTip>
                                            <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.WeightDecayTurnsToolTip}"/>
                                        </ToolTip>
                                    </TextBox.ToolTip>
                                </TextBox>
                                <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.WeightDecayTurnsUnit}"
                                        VerticalAlignment="Center"
                                        Margin="10,0,0,0"
                                        Foreground="{StaticResource SecondaryTextBrush}"
                                        FontSize="14"/>
                            </StackPanel>

                            <!-- è®°å¿†æ¡æ•°ä¸Šé™ -->
                            <StackPanel Orientation="Horizontal"
                                        Margin="0,0,0,12">
                                <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.MaxRecordsLimit}"
                                        VerticalAlignment="Center"
                                        x:Name="TextBlock_MaxRecordsLimit"
                                        Foreground="{StaticResource PrimaryTextBrush}"
                                        FontSize="14"
                                        Width="200"/>
                                <TextBox x:Name="TextBox_MaxRecordsLimit"
                                        Width="110"
                                        Margin="10,0"
                                        Style="{StaticResource ModernTextBox}">
                                    <TextBox.ToolTip>
                                        <ToolTip>
                                            <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.MaxRecordsLimitToolTip}"/>
                                        </ToolTip>
                                    </TextBox.ToolTip>
                                </TextBox>
                                <TextBlock Text="{utils:Localize KeyPath=Advanced_Options.MaxRecordsLimitUnit}"
                                        VerticalAlignment="Center"
                                        Margin="10,0,0,0"
                                        Foreground="{StaticResource SecondaryTextBrush}"
                                        FontSize="14"/>
                            </StackPanel>

                            <!-- èº«ä½“äº¤äº’è®¾ç½® -->
                            <Separator Margin="0,20,0,20"
                                     Background="{StaticResource BorderBrush}"
                                     Height="1"/>
                            <TextBlock Name="TextBlock_TouchFeedbackTitle"
                                     Text="{utils:Localize KeyPath=TouchFeedback.Title}"
                                     FontSize="16"
                                     FontWeight="SemiBold"
                                     Margin="0,0,0,16"
                                     Foreground="{StaticResource PrimaryTextBrush}"/>
                            <ContentPresenter x:Name="TouchFeedbackSettingsContainer"/>

                            <!-- æ‚¬æµ®ä¾§è¾¹æ è®¾ç½® -->
                            <Separator Margin="0,20,0,20"
                                     Background="{StaticResource BorderBrush}"
                                     Height="1"/>
                            <TextBlock Name="TextBlock_FloatingSidebarTitle"
                                     Text="{utils:Localize KeyPath=FloatingSidebar.Title, Default=æ‚¬æµ®ä¾§è¾¹æ }"
                                     FontSize="16"
                                     FontWeight="SemiBold"
                                     Margin="0,0,0,16"
                                     Foreground="{StaticResource PrimaryTextBrush}"/>
                            
                            <!-- å¯ç”¨æ‚¬æµ®ä¾§è¾¹æ  -->
                            <CheckBox x:Name="CheckBox_EnableFloatingSidebar"
                                    Content="{utils:Localize KeyPath=FloatingSidebar.Enable, Default=å¯ç”¨æ‚¬æµ®ä¾§è¾¹æ }"
                                    Margin="0,0,0,12"
                                    Style="{StaticResource ModernCheckBox}">
                                <CheckBox.ToolTip>
                                    <ToolTip>
                                        <TextBlock Text="{utils:Localize KeyPath=FloatingSidebar.EnableTooltip, Default=åœ¨æ¡Œå® æ—è¾¹æ˜¾ç¤ºå¿«æ·æ“ä½œé¢æ¿}"/>
                                    </ToolTip>
                                </CheckBox.ToolTip>
                            </CheckBox>
                            
                            <!-- è‡ªåŠ¨éšè— -->
                            <CheckBox x:Name="CheckBox_FloatingSidebar_AutoHide"
                                    Content="{utils:Localize KeyPath=FloatingSidebar.AutoHide, Default=è‡ªåŠ¨éšè—}"
                                    IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableFloatingSidebar}"
                                    Margin="20,0,0,12"
                                    Style="{StaticResource ModernCheckBox}">
                                <CheckBox.ToolTip>
                                    <ToolTip>
                                        <TextBlock Text="{utils:Localize KeyPath=FloatingSidebar.AutoHideTooltip, Default=æ— äº¤äº’æ—¶è‡ªåŠ¨é™ä½Žé€æ˜Žåº¦}"/>
                                    </ToolTip>
                                </CheckBox.ToolTip>
                            </CheckBox>
                            
                            <!-- ä¾§è¾¹æ ä½ç½® -->
                            <StackPanel Orientation="Horizontal"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableFloatingSidebar}"
                                        Margin="20,0,0,12">
                                <TextBlock Text="{utils:Localize KeyPath=FloatingSidebar.Position, Default=ä½ç½®:}"
                                        VerticalAlignment="Center"
                                        Foreground="{StaticResource PrimaryTextBrush}"
                                        FontSize="14"
                                        Width="80"/>
                                <ComboBox x:Name="ComboBox_FloatingSidebar_Position"
                                        Width="120"
                                        Margin="10,0"
                                        Style="{StaticResource ModernComboBox}">
                                    <ComboBoxItem Content="{utils:Localize KeyPath=FloatingSidebar.Position_Left, Default=å·¦ä¾§}" Tag="Left"/>
                                    <ComboBoxItem Content="{utils:Localize KeyPath=FloatingSidebar.Position_Right, Default=å³ä¾§}" Tag="Right"/>
                                    <ComboBoxItem Content="{utils:Localize KeyPath=FloatingSidebar.Position_Top, Default=ä¸Šæ–¹}" Tag="Top"/>
                                    <ComboBoxItem Content="{utils:Localize KeyPath=FloatingSidebar.Position_Bottom, Default=ä¸‹æ–¹}" Tag="Bottom"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <!-- é»˜è®¤é€æ˜Žåº¦ -->
                            <StackPanel Orientation="Horizontal"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableFloatingSidebar}"
                                        Margin="20,0,0,12">
                                <TextBlock Text="{utils:Localize KeyPath=FloatingSidebar.DefaultOpacity, Default=é»˜è®¤é€æ˜Žåº¦:}"
                                        VerticalAlignment="Center"
                                        Foreground="{StaticResource PrimaryTextBrush}"
                                        FontSize="14"
                                        Width="80"/>
                                <Slider x:Name="Slider_FloatingSidebar_DefaultOpacity"
                                        Minimum="0.1"
                                        Maximum="1.0"
                                        Width="150"
                                        Margin="10,0"
                                        VerticalAlignment="Center"/>
                                <TextBlock x:Name="TextBlock_FloatingSidebar_DefaultOpacityValue"
                                        Width="40"
                                        VerticalAlignment="Center"
                                        Foreground="{StaticResource SecondaryTextBrush}"
                                        FontSize="14"/>
                            </StackPanel>
                            
                            <!-- éžæ´»åŠ¨é€æ˜Žåº¦ -->
                            <StackPanel Orientation="Horizontal"
                                        IsEnabled="{Binding IsChecked, ElementName=CheckBox_EnableFloatingSidebar}"
                                        Margin="20,0,0,12">
                                <TextBlock Text="{utils:Localize KeyPath=FloatingSidebar.InactiveOpacity, Default=éžæ´»åŠ¨é€æ˜Žåº¦:}"
                                        VerticalAlignment="Center"
                                        Foreground="{StaticResource PrimaryTextBrush}"
                                        FontSize="14"
                                        Width="80"/>
                                <Slider x:Name="Slider_FloatingSidebar_InactiveOpacity"
                                        Minimum="0.1"
                                        Maximum="1.0"
                                        Width="150"
                                        Margin="10,0"
                                        VerticalAlignment="Center"/>
                                <TextBlock x:Name="TextBlock_FloatingSidebar_InactiveOpacityValue"
                                        Width="40"
                                        VerticalAlignment="Center"
                                        Foreground="{StaticResource SecondaryTextBrush}"
                                        FontSize="14"/>
                            </StackPanel>
                            

                        </StackPanel>
                    </Border>
                </ScrollViewer>
            </TabItem>
            <TabItem Header="{utils:Localize KeyPath=Tools.Tab}"
                    x:Name="Tab_Tools"
                    Style="{StaticResource ModernTabItem}">
                <Border Style="{StaticResource CardContainer}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- ç®€åŒ–çš„å·¥å…·ç®¡ç†å¤´éƒ¨ -->
                        <Border Background="{StaticResource ControlBackgroundBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="16,12"
                                Margin="0,0,0,16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- æ ‡é¢˜åŒºåŸŸ -->
                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                    <TextBlock x:Name="TextBlock_ToolsManagement"
                                            Text="{utils:Localize KeyPath=Tools.Management}"
                                            FontSize="16"
                                            FontWeight="SemiBold"
                                            Foreground="{StaticResource PrimaryTextBrush}"
                                            Margin="0,0,0,2"/>
                                    <TextBlock x:Name="TextBlock_ToolsManagementDescription"
                                            Text="{utils:Localize KeyPath=Tools.ManagementDescription}"
                                            Foreground="{StaticResource SecondaryTextBrush}"
                                            FontSize="12"/>
                                </StackPanel>

                                <!-- æ“ä½œæŒ‰é’® -->
                                <StackPanel Grid.Column="1" 
                                           Orientation="Horizontal" 
                                           VerticalAlignment="Center">
                                    <Button x:Name="Button_AddTool"
                                            Content="{utils:Localize KeyPath=Tools.Add}"
                                            Margin="0,0,8,0"
                                            Padding="12,6"
                                            Click="Button_AddTool_Click"
                                            Style="{StaticResource PrimaryButton}"/>
                                    <Button x:Name="Button_DeleteTool"
                                            Content="{utils:Localize KeyPath=Tools.Delete}"
                                            Padding="12,6"
                                            Click="Button_DeleteTool_Click"
                                            Style="{StaticResource SecondaryButton}"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- ç®€åŒ–çš„å·¥å…·åˆ—è¡¨å®¹å™¨ -->
                        <Border Background="{StaticResource ControlBackgroundBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Grid.Row="1">
                            <DataGrid x:Name="DataGrid_Tools"
                                    AutoGenerateColumns="False"
                                    CanUserAddRows="False"
                                    RowHeight="60"
                                    GridLinesVisibility="Horizontal"
                                    HeadersVisibility="Column"
                                    AlternatingRowBackground="{StaticResource SecondaryBrush}"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Style="{StaticResource ModernDataGrid}"
                                    ColumnHeaderStyle="{StaticResource ModernDataGridColumnHeader}"
                                    HorizontalGridLinesBrush="{StaticResource BorderBrush}"
                                    SelectionMode="Single"
                                    SelectionUnit="FullRow">
                                <DataGrid.Columns>
                                    <!-- ç®€åŒ–çš„å¯ç”¨çŠ¶æ€åˆ— -->
                                    <DataGridTemplateColumn Header="{utils:Localize KeyPath=Tools.Enabled}" Width="60">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox IsChecked="{Binding IsEnabled, UpdateSourceTrigger=PropertyChanged}"
                                                         HorizontalAlignment="Center"
                                                         VerticalAlignment="Center"
                                                         Style="{StaticResource ModernCheckBox}"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                        <DataGridTemplateColumn.HeaderStyle>
                                            <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource ModernDataGridColumnHeader}">
                                                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                            </Style>
                                        </DataGridTemplateColumn.HeaderStyle>
                                    </DataGridTemplateColumn>

                                    <!-- å·¥å…·åç§°åˆ— -->
                                    <DataGridTextColumn Header="{utils:Localize KeyPath=Tools.Name}"
                                    Binding="{Binding Name}"
                                    Width="150"
                                    MinWidth="120">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Padding" Value="8,6"/>
                                                <Setter Property="FontWeight" Value="SemiBold"/>
                                                <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                                                <Setter Property="VerticalAlignment" Value="Center"/>
                                                <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                                <Setter Property="ToolTip" Value="{Binding Name}"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>

                                    <!-- URL åˆ— -->
                                    <DataGridTextColumn Header="{utils:Localize KeyPath=Tools.URL}"
                                    Binding="{Binding Url}"
                                    Width="200"
                                    MinWidth="150">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Padding" Value="8,6"/>
                                                <Setter Property="Foreground" Value="{StaticResource AccentBrush}"/>
                                                <Setter Property="VerticalAlignment" Value="Center"/>
                                                <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                                <Setter Property="ToolTip" Value="{Binding Url}"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>

                                    <!-- å·¥å…·æè¿°åˆ— -->
                                    <DataGridTextColumn Header="{utils:Localize KeyPath=Tools.Description}"
                                    Binding="{Binding Description}"
                                    Width="*"
                                    MinWidth="200">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Padding" Value="8,6"/>
                                                <Setter Property="TextWrapping" Value="Wrap"/>
                                                <Setter Property="VerticalAlignment" Value="Center"/>
                                                <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                                                <Setter Property="LineHeight" Value="18"/>
                                                <Setter Property="MaxHeight" Value="44"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>

                                    <!-- ApiKey åˆ— -->
                                    <DataGridTextColumn Header="{utils:Localize KeyPath=Tools.ApiKey}"
                                    Binding="{Binding ApiKey}"
                                    Width="150"
                                    MinWidth="120">
                                        <DataGridTextColumn.ElementStyle>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Padding" Value="8,6"/>
                                                <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}"/>
                                                <Setter Property="VerticalAlignment" Value="Center"/>
                                                <Setter Property="FontFamily" Value="Consolas"/>
                                                <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                                <Setter Property="ToolTip" Value="{Binding ApiKey}"/>
                                            </Style>
                                        </DataGridTextColumn.ElementStyle>
                                    </DataGridTextColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                    </Grid>
                </Border>
            </TabItem>
            <TabItem Header="{utils:Localize KeyPath=Log.Tab}"
                    x:Name="Tab_Log"
                    Style="{StaticResource ModernTabItem}">
                <Border Style="{StaticResource CardContainer}">
                    <DockPanel>
                        <StackPanel DockPanel.Dock="Top"
                                Orientation="Horizontal"
                                HorizontalAlignment="Left"
                                Margin="0,0,0,16">
                            <CheckBox x:Name="CheckBox_LogAutoScroll"
                                    Content="{utils:Localize KeyPath=Log.AutoScroll}"
                                    Margin="0,0,20,0"
                                    Style="{StaticResource ModernCheckBox}"/>
                            <TextBlock Text="{utils:Localize KeyPath=Log.MaxLogCount}"
                                    VerticalAlignment="Center"
                                    Margin="0,0,8,0"
                                    x:Name="TextBlock_MaxLogCount"
                                    Foreground="{StaticResource PrimaryTextBrush}"
                                    FontSize="14"/>
                            <TextBox x:Name="TextBox_MaxLogCount"
                                    Width="185"
                                    VerticalAlignment="Center"
                                    Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>
                        <StackPanel DockPanel.Dock="Bottom"
                                Orientation="Horizontal"
                                HorizontalAlignment="Right"
                                Margin="0,16,0,0">
                            <Button x:Name="Button_CopyLog"
                                    Content="{utils:Localize KeyPath=Log.Copy}"
                                    Click="Button_CopyLog_Click"
                                    Margin="0,0,8,0"
                                    Style="{StaticResource SecondaryButton}"/>
                            <Button x:Name="Button_ClearLog"
                                    Content="{utils:Localize KeyPath=Log.Clear}"
                                    Click="Button_ClearLog_Click"
                                    Style="{StaticResource SecondaryButton}"/>
                        </StackPanel>
                        <ListBox x:Name="LogBox"
                                MinHeight="200"
                                Background="{StaticResource BackgroundBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1"
                                ScrollViewer.CanContentScroll="False"
                                ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                ScrollViewer.VerticalScrollBarVisibility="Auto"/>
                    </DockPanel>
                </Border>
            </TabItem>
            <TabItem Header="{utils:Localize KeyPath=Plugin.Tab}"
                    x:Name="Tab_Plugin"
                    Style="{StaticResource ModernTabItem}">
                <Border Style="{StaticResource CardContainer}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- ç®€åŒ–çš„æ’ä»¶ç®¡ç†å¤´éƒ¨ -->
                        <Border Background="{StaticResource ControlBackgroundBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="16,12"
                                Margin="0,0,0,16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- æ ‡é¢˜åŒºåŸŸ -->
                                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                    <TextBlock x:Name="TextBlock_PluginManagementCenter"
                                            Text="{utils:Localize KeyPath=Plugin.ManagementCenter}"
                                            FontSize="16"
                                            FontWeight="SemiBold"
                                            Foreground="{StaticResource PrimaryTextBrush}"
                                            Margin="0,0,0,2"/>
                                    <TextBlock x:Name="TextBlock_HowToUse"
                                            Foreground="{StaticResource SecondaryTextBrush}"
                                            FontSize="12"/>
                                </StackPanel>

                                <!-- æ“ä½œæŒ‰é’® -->
                                <StackPanel Grid.Column="1" 
                                           Orientation="Horizontal" 
                                           VerticalAlignment="Center">
                                    <Button x:Name="Button_RefreshPlugins"
                                            Content="{utils:Localize KeyPath=Plugin.Refresh}"
                                            Margin="0,0,8,0"
                                            Padding="12,6"
                                            Click="Button_RefreshPlugins_Click"
                                            Style="{StaticResource SecondaryButton}"/>
                                    <Button x:Name="Button_ImportPlugin"
                                            Content="{utils:Localize KeyPath=Plugin.ImportPlugin}"
                                            Padding="12,6"
                                            Click="Button_ImportPlugin_Click"
                                            Style="{StaticResource PrimaryButton}"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <!-- ç®€åŒ–çš„æ’ä»¶åˆ—è¡¨å®¹å™¨ -->
                        <Border Background="{StaticResource ControlBackgroundBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Grid.Row="1">
                            <DataGrid x:Name="DataGrid_Plugins"
                                    AutoGenerateColumns="False"
                                    CanUserAddRows="False"
                                    SelectionChanged="DataGrid_Plugins_SelectionChanged"
                                    RowHeight="60"
                                    GridLinesVisibility="Horizontal"
                                    HeadersVisibility="Column"
                                    AlternatingRowBackground="{StaticResource SecondaryBrush}"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Style="{StaticResource ModernDataGrid}"
                                    ColumnHeaderStyle="{StaticResource ModernDataGridColumnHeader}"
                                    HorizontalGridLinesBrush="{StaticResource BorderBrush}"
                                    SelectionMode="Single"
                                    SelectionUnit="FullRow">
                                <DataGrid.Columns>
                                    <!-- ç®€åŒ–çš„å¯ç”¨çŠ¶æ€åˆ— -->
                                    <DataGridTemplateColumn Header="{utils:Localize KeyPath=Plugin.Enabled}" Width="60">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox IsChecked="{Binding IsEnabled, UpdateSourceTrigger=PropertyChanged}"
                                                         IsEnabled="{Binding IsFailed, Converter={StaticResource BoolInverter}}"
                                                         Click="PluginEnabled_Click"
                                                         HorizontalAlignment="Center"
                                                         VerticalAlignment="Center"
                                                         Style="{StaticResource ModernCheckBox}"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                        <DataGridTemplateColumn.HeaderStyle>
                                            <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource ModernDataGridColumnHeader}">
                                                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                            </Style>
                                        </DataGridTemplateColumn.HeaderStyle>
                                    </DataGridTemplateColumn>

                                    <!-- ä¼˜åŒ–çš„æ’ä»¶çŠ¶æ€åˆ— -->
                                    <DataGridTemplateColumn Header="{utils:Localize KeyPath=Plugin.Status}" Width="80">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal" 
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Center">
                                                    <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
                                                    <Ellipse x:Name="StatusIndicator"
                                                            Width="8"
                                                            Height="8"
                                                            Fill="#38B2AC"
                                                            Margin="0,0,6,0"
                                                            VerticalAlignment="Center"/>

                                                    <!-- çŠ¶æ€æ–‡å­— -->
                                                    <TextBlock x:Name="StatusTextDisplay"
                                                              Text="{Binding StatusText}"
                                                              FontSize="11"
                                                              Foreground="#38B2AC"
                                                              FontWeight="Medium"
                                                              VerticalAlignment="Center"/>
                                                </StackPanel>

                                                <DataTemplate.Triggers>
                                                    <!-- é”™è¯¯çŠ¶æ€ -->
                                                    <DataTrigger Binding="{Binding IsFailed}" Value="True">
                                                        <Setter TargetName="StatusIndicator" Property="Fill" Value="#E53E3E"/>
                                                        <Setter TargetName="StatusTextDisplay" Property="Foreground" Value="#E53E3E"/>
                                                    </DataTrigger>

                                                    <!-- ç¦ç”¨çŠ¶æ€ -->
                                                    <DataTrigger Binding="{Binding IsEnabled}" Value="False">
                                                        <Setter TargetName="StatusIndicator" Property="Fill" Value="#A0AEC0"/>
                                                        <Setter TargetName="StatusTextDisplay" Property="Foreground" Value="#A0AEC0"/>
                                                    </DataTrigger>

                                                    <!-- å¾…å¯åŠ¨çŠ¶æ€ -->
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding IsEnabled}" Value="True"/>
                                                            <Condition Binding="{Binding IsLoaded}" Value="False"/>
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter TargetName="StatusIndicator" Property="Fill" Value="#F6AD55"/>
                                                        <Setter TargetName="StatusTextDisplay" Property="Foreground" Value="#F6AD55"/>
                                                    </MultiDataTrigger>

                                                    <!-- æ­£å¸¸è¿è¡ŒçŠ¶æ€ -->
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding IsEnabled}" Value="True"/>
                                                            <Condition Binding="{Binding IsFailed}" Value="False"/>
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter TargetName="StatusIndicator" Property="Fill" Value="#38B2AC"/>
                                                        <Setter TargetName="StatusTextDisplay" Property="Foreground" Value="#38B2AC"/>
                                                    </MultiDataTrigger>

                                                    <!-- æœªä¸‹è½½çŠ¶æ€ (æœ€åŽå¤„ç†ï¼Œç¡®ä¿ä¼˜å…ˆçº§æœ€é«˜) -->
                                                    <DataTrigger Binding="{Binding IsLocal}" Value="False">
                                                        <Setter TargetName="StatusIndicator" Property="Fill" Value="#718096"/>
                                                        <Setter TargetName="StatusTextDisplay" Property="Foreground" Value="#718096"/>
                                                    </DataTrigger>
                                                </DataTemplate.Triggers>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                        <DataGridTemplateColumn.HeaderStyle>
                                            <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource ModernDataGridColumnHeader}">
                                                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                            </Style>
                                        </DataGridTemplateColumn.HeaderStyle>
                                    </DataGridTemplateColumn>
                                    <!-- ç®€åŒ–çš„æ’ä»¶ä¿¡æ¯åˆ— -->
                                    <DataGridTemplateColumn Header="{utils:Localize KeyPath=Plugin.Name}" Width="200" MinWidth="180">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Margin="8,6" VerticalAlignment="Center">
                                                    <!-- æ’ä»¶åç§° -->
                                                    <TextBlock Text="{Binding Name}"
                                                              FontSize="14"
                                                              FontWeight="SemiBold"
                                                              Foreground="{StaticResource PrimaryTextBrush}"
                                                              TextTrimming="CharacterEllipsis"
                                                              ToolTip="{Binding Name}"
                                                              Margin="0,0,0,2"/>

                                                    <!-- ä½œè€…ä¿¡æ¯ -->
                                                    <TextBlock Text="{Binding Author}"
                                                              FontSize="12"
                                                              Foreground="{StaticResource SecondaryTextBrush}"
                                                              TextTrimming="CharacterEllipsis"
                                                              ToolTip="{Binding Author}"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>

                                    <!-- æ’ä»¶æè¿°åˆ— -->
                                    <DataGridTemplateColumn Header="{utils:Localize KeyPath=Plugin.Description}" Width="*" MinWidth="250">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Description}"
                                                          Margin="8,6"
                                                          FontSize="12"
                                                          Foreground="{StaticResource PrimaryTextBrush}"
                                                          TextWrapping="Wrap"
                                                          TextTrimming="CharacterEllipsis"
                                                          VerticalAlignment="Center"
                                                          MaxHeight="44"
                                                          LineHeight="16"
                                                          ToolTip="{Binding Description}"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <!-- ç®€åŒ–çš„æ“ä½œåˆ— -->
                                    <DataGridTemplateColumn Header="{utils:Localize KeyPath=Plugin.Action}" Width="160" MinWidth="140">
                                        <DataGridTemplateColumn.HeaderStyle>
                                            <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource ModernDataGridColumnHeader}">
                                                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                            </Style>
                                        </DataGridTemplateColumn.HeaderStyle>
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal" 
                                                           Margin="8,6"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Center">

                                                    <!-- ä¸»è¦æ“ä½œæŒ‰é’® -->
                                                    <Button Click="Button_PluginAction_Click" 
                                                           Content="{Binding ActionText}"
                                                           Margin="0,0,4,0"
                                                           Padding="8,4"
                                                           FontSize="12">
                                                        <Button.Style>
                                                            <Style TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
                                                                <Setter Property="Visibility" Value="Visible"/>
                                                                <Style.Triggers>
                                                                    <MultiDataTrigger>
                                                                        <MultiDataTrigger.Conditions>
                                                                            <Condition Binding="{Binding IsLocal}" Value="True"/>
                                                                            <Condition Binding="{Binding IsFailed}" Value="False"/>
                                                                            <Condition Binding="{Binding IsUpdatable}" Value="False"/>
                                                                        </MultiDataTrigger.Conditions>
                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                    </MultiDataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>

                                                    <!-- è®¾ç½®æŒ‰é’® -->
                                                    <Button Click="Button_PluginSetting_Click"
                                                           Content="{Binding SettingActionText}"
                                                           Margin="0,0,4,0"
                                                           Padding="8,4"
                                                           FontSize="12"
                                                           ToolTip="{Binding SettingActionText}">
                                                        <Button.Style>
                                                            <Style TargetType="Button" BasedOn="{StaticResource SecondaryButton}">
                                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding HasSettingAction}" Value="True">
                                                                        <Setter Property="Visibility" Value="Visible"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>

                                                    <!-- å¸è½½æŒ‰é’® -->
                                                    <Button Click="Button_UninstallPlugin_Click"
                                                           Content="{Binding UninstallActionText}"
                                                           Padding="8,4"
                                                           FontSize="12"
                                                           ToolTip="{Binding UninstallActionText}">
                                                        <Button.Style>
                                                            <Style TargetType="Button" BasedOn="{StaticResource SecondaryButton}">
                                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                                <Setter Property="Foreground" Value="#E53E3E"/>
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding IsLocal}" Value="True">
                                                                        <Setter Property="Visibility" Value="Visible"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>

                                                </StackPanel>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                    </Grid>
                </Border>
            </TabItem>
        </TabControl>
    </Grid>
</Window>