<UserControl x:Class="VPetLLMPlugin.UI.Controls.FloatingSidebar"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        mc:Ignorable="d"
        VerticalAlignment="Center" HorizontalAlignment="Right"
        MouseEnter="UserControl_MouseEnter" MouseLeave="UserControl_MouseLeave">
    <UserControl.ContextMenu>
        <ContextMenu x:Name="CM">
            <MenuItem x:Name="SettingMenuItem" Header="设置" Click="SettingMenuItem_Click" />
            <Separator />
            <MenuItem x:Name="HideMenuItem" Header="隐藏侧边栏" Click="HideMenuItem_Click" />
        </ContextMenu>
    </UserControl.ContextMenu>
    <Border x:Name="SidebarContainer"
            Background="{DynamicResource DARKPrimaryLighter}" 
            BorderBrush="{DynamicResource DARKPrimaryDark}"
            BorderThickness="2" 
            CornerRadius="6"
            Padding="4"
            Margin="2">
        <Border.Effect>
            <DropShadowEffect Color="#000000" 
                              Direction="270" 
                              ShadowDepth="1" 
                              BlurRadius="4" 
                              Opacity="0.2"/>
        </Border.Effect>
        <!-- 垂直布局容器 -->
        <StackPanel x:Name="VerticalLayoutPanel" Orientation="Vertical">
            <!-- Status Light -->
            <Ellipse x:Name="StatusLight" 
                     Width="12" Height="12"
                     HorizontalAlignment="Center"
                     Margin="0,2,0,4"
                     Fill="Transparent"
                     Stroke="White"
                     StrokeThickness="1">
                <Ellipse.Effect>
                    <DropShadowEffect x:Name="StatusLightGlow"
                                      Color="Transparent" 
                                      Direction="0" 
                                      ShadowDepth="0" 
                                      BlurRadius="6" 
                                      Opacity="0.9"/>
                </Ellipse.Effect>
            </Ellipse>
            <!-- Close Button -->
            <Button x:Name="CloseButton" 
                    HorizontalAlignment="Center"
                    Click="CloseButton_Click"
                    ToolTip="隐藏侧边栏"
                    Width="18" Height="18"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    Margin="0,0,0,2">
                <TextBlock Text="×" FontSize="11" FontWeight="Bold" 
                           Foreground="{DynamicResource DARKPrimaryText}"
                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Button>
            <!-- Button Container -->
            <StackPanel x:Name="ButtonContainer" 
                       Orientation="Vertical"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                <!-- Buttons will be added dynamically -->
            </StackPanel>
        </StackPanel>
    </Border>
</UserControl>
